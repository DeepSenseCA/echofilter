
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>echofilter.raw package &#8212; Echofilter 1.0.dev0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="echofilter.ui package" href="echofilter.ui.html" />
    <link rel="prev" title="echofilter.optim package" href="echofilter.optim.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Echofilter 1.0.dev0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../usage_guide.html">
   Usage Guide
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../programs/programs.html">
   CLI Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/inference.html">
     echofilter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/ev2csv.html">
     ev2csv
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/train.html">
     echofilter-train
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/generate_shards.html">
     echofilter-generate-shards
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="modules.html">
   API Reference
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="echofilter.html">
     echofilter package
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.data.html">
       echofilter.data package
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="echofilter.nn.html">
       echofilter.nn package
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="echofilter.nn.modules.html">
         echofilter.nn.modules package
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.optim.html">
       echofilter.optim package
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       echofilter.raw package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.ui.html">
       echofilter.ui package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.win.html">
       echofilter.win package
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   Changelog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../py-modindex.html">
   Module Index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../genindex.html">
   Index
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/source/packages/echofilter.raw.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.loader">
   echofilter.raw.loader module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.manipulate">
   echofilter.raw.manipulate module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.metadata">
   echofilter.raw.metadata module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.shardloader">
   echofilter.raw.shardloader module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.utils">
   echofilter.raw.utils module
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>echofilter.raw package</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.loader">
   echofilter.raw.loader module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.manipulate">
   echofilter.raw.manipulate module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.metadata">
   echofilter.raw.metadata module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.shardloader">
   echofilter.raw.shardloader module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.raw.utils">
   echofilter.raw.utils module
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="module-echofilter.raw">
<span id="echofilter-raw-package"></span><h1>echofilter.raw package<a class="headerlink" href="#module-echofilter.raw" title="Permalink to this headline">#</a></h1>
<p>Echoview output file loading and generation, post-processing and shard generation.</p>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">#</a></h2>
</div>
<div class="section" id="module-echofilter.raw.loader">
<span id="echofilter-raw-loader-module"></span><h2>echofilter.raw.loader module<a class="headerlink" href="#module-echofilter.raw.loader" title="Permalink to this headline">#</a></h2>
<p>Input/Output handling for raw Echoview files.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.count_lines">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">count_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#count_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.count_lines" title="Permalink to this definition">#</a></dt>
<dd><p>Count the number of lines in a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of lines in file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.evl_loader">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">evl_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">special_to_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#evl_loader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.evl_loader" title="Permalink to this definition">#</a></dt>
<dd><p>EVL file loader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to .evl file.</p></li>
<li><p><strong>special_to_nan</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to replace the special value, <cite>-10000.99</cite>, which indicates no
depth value, with NaN.
<a class="reference external" href="https://support.echoview.com/WebHelp/Reference/File_formats/Export_file_formats/Special_Export_Values.htm">https://support.echoview.com/WebHelp/Reference/File_formats/Export_file_formats/Special_Export_Values.htm</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.ndarray of floats</em> – Timestamps, in seconds.</p></li>
<li><p><em>numpy.ndarary of floats</em> – Depth, in metres.</p></li>
<li><p><em>numpy.ndarary of ints, optional</em> – Status codes.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.evl_reader">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">evl_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#evl_reader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.evl_reader" title="Permalink to this definition">#</a></dt>
<dd><p>EVL file reader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to .evl file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator which yields the timestamp (in seconds), depth (in
metres), and status (int) for each entry. Note that the timestamp is
not corrected for timezone (so make sure your timezones are internally
consistent).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.evl_writer">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">evl_writer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_ending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\r\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#evl_writer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.evl_writer" title="Permalink to this definition">#</a></dt>
<dd><p>EVL file writer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Destination of output file.</p></li>
<li><p><strong>timestamps</strong> (<em>array_like</em>) – Timestamps for each node in the line.</p></li>
<li><p><strong>depths</strong> (<em>array_like</em>) – Depths (in meters) for each node in the line.</p></li>
<li><p><strong>status</strong> (<em>0</em><em>, </em><em>1</em><em>, </em><em>2</em><em>, or </em><em>3; optional</em>) – <p>Status for the line.</p>
<ul>
<li><p><cite>0</cite> : none</p></li>
<li><p><cite>1</cite> : unverified</p></li>
<li><p><cite>2</cite> : bad</p></li>
<li><p><cite>3</cite> : good</p></li>
</ul>
<p>Default is <cite>1</cite> (unverified). For more details on line status, see
<a class="reference external" href="https://support.echoview.com/WebHelp/Using_Echoview/Echogram/Lines/About_Line_Status.htm">https://support.echoview.com/WebHelp/Using_Echoview/Echogram/Lines/About_Line_Status.htm</a></p>
</p></li>
<li><p><strong>pad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to pad the line with an extra datapoint half a pixel before the
first and after the last given timestamp. Default is <cite>False</cite>.</p></li>
<li><p><strong>line_ending</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Line ending. Default is <cite>“rn”</cite> the standard line ending on Windows/DOS,
as per the specification for the file format.
<a class="reference external" href="https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm">https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm</a>
Set to <cite>“n”</cite> to get Unix-style line endings instead.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For more details on the format specification, see
<a class="reference external" href="https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm#Line_definition_file_format">https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm#Line_definition_file_format</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.evr_writer">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">evr_writer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rectangles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common_notes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_region_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_ending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\r\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#evr_writer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.evr_writer" title="Permalink to this definition">#</a></dt>
<dd><p>EVR file writer.</p>
<p>Writes regions to an Echoview region file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Destination of output file.</p></li>
<li><p><strong>rectangles</strong> (<em>list of dictionaries</em><em>, </em><em>optional</em>) – Rectangle region definitions. Default is an empty list. Each rectangle
region must implement fields <cite>“depths”</cite> and <cite>“timestamps”</cite>, which
indicate the extent of the rectangle. Optionally, <cite>“creation_type”</cite>,
<cite>“region_name”</cite>, <cite>“region_type”</cite>, and <cite>“notes”</cite> may be set.
If these are not given, the default creation_type is 4 and region_type
is set by <cite>default_region_type</cite>.</p></li>
<li><p><strong>contours</strong> (<em>list of dictionaries</em>) – Contour region definitions. Default is an empty list. Each contour
region must implement a <cite>“points”</cite> field containing a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>
shaped <cite>(n, 2)</cite> defining the co-ordinates of nodes along the (open)
contour in units of timestamp and depth. Optionally, <cite>“creation_type”</cite>,
<cite>“region_name”</cite>, <cite>“region_type”</cite>, and <cite>“notes”</cite> may be set.
If these are not given, the default creation_type is 2 and region_type
is set by <cite>default_region_type</cite>.</p></li>
<li><p><strong>common_notes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Notes to include for every region. Default is <cite>“”</cite>, an empty string.</p></li>
<li><p><strong>default_region_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – <p>The region type to use for rectangles and contours which do not define
a <cite>“region_type”</cite> field. Possible region types are</p>
<ul>
<li><p><cite>0</cite> : bad (no data)</p></li>
<li><p><cite>1</cite> : analysis</p></li>
<li><p><cite>2</cite> : marker</p></li>
<li><p><cite>3</cite> : fishtracks</p></li>
<li><p><cite>4</cite> : bad (empty water)</p></li>
</ul>
<p>Default is <cite>0</cite>.</p>
</p></li>
<li><p><strong>line_ending</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Line ending. Default is <cite>“rn”</cite> the standard line ending on Windows/DOS,
as per the specification for the file format.
<a class="reference external" href="https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm">https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm</a>
Set to <cite>“n”</cite> to get Unix-style line endings instead.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For more details on the format specification, see:
<a class="reference external" href="https://support.echoview.com/WebHelp/Reference/File_formats/Export_file_formats/2D_Region_definition_file_format.htm">https://support.echoview.com/WebHelp/Reference/File_formats/Export_file_formats/2D_Region_definition_file_format.htm</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.get_partition_data">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">get_partition_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitioning_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'firstpass'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#get_partition_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.get_partition_data" title="Permalink to this definition">#</a></dt>
<dd><p>Loads partition metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect, excluding <cite>“_Sv_raw.csv”</cite>.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>partitioning_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of partitioning method.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Metadata for all transects in the partition. Each row is a single
sample.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.get_partition_list">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">get_partition_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitioning_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'firstpass'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sharded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#get_partition_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.get_partition_list" title="Permalink to this definition">#</a></dt>
<dd><p>Get a list of transects in a single partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect, excluding <cite>“_Sv_raw.csv”</cite>.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>full_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to return the full path to the sample. If <cite>False</cite>, only the
relative path (from the dataset directory) is returned.
Default is <cite>False</cite>.</p></li>
<li><p><strong>partitioning_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of partitioning method.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Path to root directory where data is located.</p></li>
<li><p><strong>sharded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to return path to sharded version of data. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path for each sample in the partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.list_from_file">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">list_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#list_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.list_from_file" title="Permalink to this definition">#</a></dt>
<dd><p>Get a list from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Contents of the file, one line per entry in the list. Trailing
whitespace is removed from each end of each line.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.load_transect_data">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">load_transect_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#load_transect_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.load_transect_data" title="Permalink to this definition">#</a></dt>
<dd><p>Load all data for one transect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect, excluding <cite>“_Sv_raw.csv”</cite>.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>timestamps</strong> (<em>numpy.ndarray</em>) – Timestamps (in seconds since Unix epoch), with each entry
corresponding to each row in the <cite>signals</cite> data.</p></li>
<li><p><strong>depths</strong> (<em>numpy.ndarray</em>) – Depths from the surface (in metres), with each entry corresponding
to each column in the <cite>signals</cite> data.</p></li>
<li><p><strong>signals</strong> (<em>numpy.ndarray</em>) – Echogram Sv data, shaped (num_timestamps, num_depths).</p></li>
<li><p><strong>turbulence</strong> (<em>numpy.ndarray</em>) – Depth of turbulence line, shaped (num_timestamps, ).</p></li>
<li><p><strong>bottom</strong> (<em>numpy.ndarray</em>) – Depth of bottom line, shaped (num_timestamps, ).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.remove_trailing_slash">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">remove_trailing_slash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#remove_trailing_slash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.remove_trailing_slash" title="Permalink to this definition">#</a></dt>
<dd><p>Remove trailing forward slashes from a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – String representing a path, possibly with trailing slashes.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Same as <cite>s</cite>, but without trailing forward slashes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.timestamp2evdtstr">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">timestamp2evdtstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#timestamp2evdtstr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.timestamp2evdtstr" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a timestamp into an Echoview-compatible datetime string, in the
format “CCYYMMDD HHmmSSssss”, where:</p>
<div class="line-block">
<div class="line">CC: century</div>
<div class="line">YY: year</div>
<div class="line">MM: month</div>
<div class="line">DD: day</div>
<div class="line">HH: hour</div>
<div class="line">mm: minute</div>
<div class="line">SS: second</div>
<div class="line">ssss: 0.1 milliseconds</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Number of seconds since Unix epoch.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>datetimestring</strong> – Datetime string in the Echoview-compatible format
“CCYYMMDD HHmmSSssss”.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.transect_loader">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">transect_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn_row_overflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_len_selector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mode'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#transect_loader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.transect_loader" title="Permalink to this definition">#</a></dt>
<dd><p>Loads an entire survey transect CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to survey CSV file.</p></li>
<li><p><strong>skip_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of initial entries to skip. Default is 0.</p></li>
<li><p><strong>warn_row_overflow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Whether to print a warning message if the number of elements in a
row exceeds the expected number. If this is an int, this is the number
of times to display the warnings before they are supressed. If this
is <cite>True</cite>, the number of outputs is unlimited. If <cite>None</cite>, the
maximum number of underflow and overflow warnings differ: if
<cite>row_len_selector</cite> is <cite>“init”</cite> or <cite>“min”</cite>, underflow always produces a
message and the overflow messages stop at 2; otherwise the values are
reversed. Default is <cite>None</cite>.</p></li>
<li><p><strong>row_len_selector</strong> (<em>{&quot;init&quot;</em><em>, </em><em>&quot;min&quot;</em><em>, </em><em>&quot;max&quot;</em><em>, </em><em>&quot;median&quot;</em><em>, </em><em>&quot;mode&quot;}</em><em>, </em><em>optional</em>) – The method used to determine which row length (number of depth samples)
to use. Default is <cite>“mode”</cite>, the most common row length across all
the measurement timepoints.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.ndarray</em> – Timestamps for each row, in seconds. Note: not corrected for timezone
(so make sure your timezones are internally consistent).</p></li>
<li><p><em>numpy.ndarray</em> – Depth of each column, in metres.</p></li>
<li><p><em>numpy.ndarray</em> – Survey signal (Sv, for instance). Units match that of the file.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.transect_reader">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">transect_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#transect_reader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.transect_reader" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a generator which iterates through a survey csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to survey CSV file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Yields a tupule of <cite>(metadata, data)</cite>, where metadata is a dict,
and data is a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>. Each yield corresponds to a single
row in the data. Every row (except for the header) is yielded.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.loader.write_transect_regions">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.loader.</span></span><span class="sig-name descname"><span class="pre">write_transect_regions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'is_passive'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removed_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'is_removed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patches_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mask_patches'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_passive_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_removed_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_passive_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_removed_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_patch_area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common_notes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_ending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\r\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_indent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/loader.html#write_transect_regions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.loader.write_transect_regions" title="Permalink to this definition">#</a></dt>
<dd><p>Convert a transect dictionary to a set of regions and write as an EVR file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Destination of output file.</p></li>
<li><p><strong>transect</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Transect dictionary.</p></li>
<li><p><strong>depth_range</strong> (<em>array_like</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – The minimum and maximum depth extents (in any order) of the passive and
removed block regions. If this is <cite>None</cite> (default), the minimum and
maximum of <cite>transect[“depths”]</cite> is used.</p></li>
<li><p><strong>passive_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Field name to use for passive data identification. Default is
<cite>“is_passive”</cite>.</p></li>
<li><p><strong>removed_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Field name to use for removed blocks. Default is <cite>“is_removed”</cite>.</p></li>
<li><p><strong>patches_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Field name to use for the mask of patch regions. Default is
<cite>“mask_patches”</cite>.</p></li>
<li><p><strong>collate_passive_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum distance (in indices) over which passive regions should be
merged together, closing small gaps between them. Default is <cite>0</cite>.</p></li>
<li><p><strong>collate_removed_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum distance (in indices) over which removed blocks should be
merged together, closing small gaps between them. Default is <cite>0</cite>.</p></li>
<li><p><strong>minimum_passive_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum length (in indices) a passive region must have to be included
in the output. Set to -1 to omit all passive regions from the output.
Default is <cite>0</cite>.</p></li>
<li><p><strong>minimum_removed_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum length (in indices) a removed block must have to be included in
the output. Set to -1 to omit all removed regions from the output.
Default is <cite>0</cite>.</p></li>
<li><p><strong>minimum_patch_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Minimum amount of area (in input pixel space) that a patch must occupy
in order to be included in the output. Set to <cite>0</cite> to include all
patches, no matter their area. Set to <cite>-1</cite> to omit all patches.
Default is <cite>0</cite>.</p></li>
<li><p><strong>name_suffix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Suffix to append to variable names. Default is <cite>“”</cite>, an empty string.</p></li>
<li><p><strong>common_notes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Notes to include for every region. Default is <cite>“”</cite>, an empty string.</p></li>
<li><p><strong>line_ending</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Line ending. Default is <cite>“rn”</cite> the standard line ending on Windows/DOS,
as per the specification for the file format,
<a class="reference external" href="https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm">https://support.echoview.com/WebHelp/Using_Echoview/Exporting/Exporting_data/Exporting_line_data.htm</a>
Set to <cite>“n”</cite> to get Unix-style line endings instead.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Verbosity level. Default is <cite>0</cite>.</p></li>
<li><p><strong>verbose_indent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Level of indentation (number of preceding spaces) before verbosity
messages. Default is <cite>0</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.raw.manipulate">
<span id="echofilter-raw-manipulate-module"></span><h2>echofilter.raw.manipulate module<a class="headerlink" href="#module-echofilter.raw.manipulate" title="Permalink to this headline">#</a></h2>
<p>Manipulating lines and masks contained in Echoview files.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.find_nonzero_region_boundaries">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">find_nonzero_region_boundaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#find_nonzero_region_boundaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.find_nonzero_region_boundaries" title="Permalink to this definition">#</a></dt>
<dd><p>Find the start and end indices for nonzero regions of a vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>v</strong> (<em>array_like</em>) – A vector.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>starts</strong> (<em>numpy.ndarray</em>) – Indices for start of regions of nonzero elements in vector <cite>v</cite></p></li>
<li><p><strong>ends</strong> (<em>numpy.ndarray</em>) – Indices for end of regions of nonzero elements in vector <cite>v</cite>
(exclusive).</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For <cite>i</cite> in <cite>range(len(starts))</cite>, the set of values <cite>v[starts[i]:ends[i]]</cite>
are nonzero. Values in the range <cite>v[ends[i]:starts[i+1]]</cite> are zero.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.find_passive_data">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">find_passive_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_depth_use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">38</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deviation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#find_passive_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.find_passive_data" title="Permalink to this definition">#</a></dt>
<dd><p>Find segments of Sv recording which correspond to passive recording.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signals</strong> (<em>array_like</em>) – Two-dimensional array of Sv values, shaped <cite>[timestamps, depths]</cite>.</p></li>
<li><p><strong>n_depth_use</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – How many Sv depths to use, starting with the first depths (closest
to the sounder device). If <cite>None</cite> all depths are used. Default is <cite>38</cite>.</p></li>
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Threshold for start/end of passive regions. Default is <cite>25</cite>.</p></li>
<li><p><strong>deviation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Threshold for start/end of passive regions is <cite>deviation</cite> times the
interquartile-range of the difference between samples at neigbouring
timestamps. Default is <cite>None</cite>. Only one of <cite>threshold</cite> and <cite>deviation</cite>
should be set.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>passive_start</strong> (<em>numpy.ndarray</em>) – Indices of rows of <cite>signals</cite> at which passive segments start.</p></li>
<li><p><strong>passive_end</strong> (<em>numpy.ndarray</em>) – Indices of rows of <cite>signals</cite> at which passive segments end.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Works by looking at the difference between consecutive recordings and
finding large deviations.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.find_passive_data_v2">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">find_passive_data_v2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_depth_use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">38</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_inner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_init</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deviation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#find_passive_data_v2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.find_passive_data_v2" title="Permalink to this definition">#</a></dt>
<dd><p>Find segments of Sv recording which correspond to passive recording.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signals</strong> (<em>array_like</em>) – Two-dimensional array of Sv values, shaped <cite>[timestamps, depths]</cite>.</p></li>
<li><p><strong>n_depth_use</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – How many Sv depths to use, starting with the first depths (closest
to the sounder device). If <cite>None</cite> all depths are used. Default is <cite>38</cite>.
The median is taken across the depths, after taking the temporal
derivative.</p></li>
<li><p><strong>threshold_inner</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Theshold to apply to the temporal derivative of the signal when
detected fine-tuned start/end of passive regions.
Default behaviour is to use a threshold automatically determined using
<cite>deviation</cite> if it is set, and otherwise use a threshold of <cite>35.0</cite>.</p></li>
<li><p><strong>threshold_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Theshold to apply during the initial scan of the start/end of passive
regions, which seeds the fine-tuning search.
Default behaviour is to use a threshold automatically determined using
<cite>deviation</cite> if it is set, and otherwise use a threshold of <cite>12.0</cite>.</p></li>
<li><p><strong>deviation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Set <cite>threshold_inner</cite> to be <cite>deviation</cite> times the standard deviation of
the temporal derivative of the signal. The standard deviation is
robustly estimated based on the interquartile range.
If this is set, <cite>threshold_inner</cite> must not be <cite>None</cite>.
Default is <cite>None</cite></p></li>
<li><p><strong>sigma_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Width of kernel for filtering signals across second dimension (depth).
Default is <cite>0</cite> (no filter).</p></li>
<li><p><strong>sigma_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Width of kernel for filtering signals across second dimension (time).
Default is <cite>1</cite>. Set to <cite>0</cite> to not filter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>passive_start</strong> (<em>numpy.ndarray</em>) – Indices of rows of <cite>signals</cite> at which passive segments start.</p></li>
<li><p><strong>passive_end</strong> (<em>numpy.ndarray</em>) – Indices of rows of <cite>signals</cite> at which passive segments end.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Works by looking at the difference between consecutive recordings and
finding large deviations.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.fix_surface_line">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">fix_surface_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_surface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_passive</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#fix_surface_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.fix_surface_line" title="Permalink to this definition">#</a></dt>
<dd><p>Fix anomalies in the surface line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>array_like sized</em><em> (</em><em>N</em><em>, </em><em>)</em>) – Timestamps for each ping.</p></li>
<li><p><strong>d_surface</strong> (<em>array_like sized</em><em> (</em><em>N</em><em>, </em><em>)</em>) – Surface line depths.</p></li>
<li><p><strong>is_passive</strong> (<em>array_like sized</em><em> (</em><em>N</em><em>, </em><em>)</em>) – Indicator for passive data. Values for the surface line during passive
data collection will not be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>fixed_surface</strong> (<em>numpy.ndarray</em>) – Surface line depths, with anomalies replaced with median filtered
values and passive data replaced with linear interpolation.
Has the same size and dtype as <cite>d_surface</cite>.</p></li>
<li><p><strong>is_replaced</strong> (<em>boolean numpy.ndarray sized (N, )</em>) – Indicates which datapoints were replaced. Note that passive data is
always replaced and is marked as such.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.fixup_lines">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">fixup_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#fixup_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.fixup_lines" title="Permalink to this definition">#</a></dt>
<dd><p>Extend existing turbulence/bottom lines based on masked target Sv output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>array_like</em>) – Shaped <cite>(num_timestamps, )</cite>.</p></li>
<li><p><strong>depths</strong> (<em>array_like</em>) – Shaped <cite>(num_depths, )</cite>.</p></li>
<li><p><strong>mask</strong> (<em>array_like</em>) – Boolean array, where <cite>True</cite> denotes kept entries.
Shaped <cite>(num_timestamps, num_depths)</cite>.</p></li>
<li><p><strong>t_turbulence</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Sampling times for existing turbulence line.</p></li>
<li><p><strong>d_turbulence</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Depth of existing turbulence line.</p></li>
<li><p><strong>t_bottom</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Sampling times for existing bottom line.</p></li>
<li><p><strong>d_bottom</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Depth of existing bottom line.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>d_turbulence_new</strong> (<em>numpy.ndarray</em>) – Depth of new turbulence line.</p></li>
<li><p><strong>d_bottom_new</strong> (<em>numpy.ndarray</em>) – Depth of new bottom line.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.join_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">join_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transects</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#join_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.join_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Joins segmented transects together into a single dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transects</strong> (<em>iterable of dict</em>) – Transect segments, each with the same fields and compatible shapes.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>dict</em> – Transect data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.load_decomposed_transect_mask">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">load_decomposed_transect_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#load_decomposed_transect_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.load_decomposed_transect_mask" title="Permalink to this definition">#</a></dt>
<dd><p>Loads a raw and masked transect and decomposes the mask into turbulence and bottom
lines, and passive and removed regions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sample_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to sample, without extension. The raw data should be located at
<code class="docutils literal notranslate"><span class="pre">sample_path</span> <span class="pre">+</span> <span class="pre">&quot;_Sv_raw.csv&quot;</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A dictionary with keys:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>”timestamps”<span class="classifier">numpy.ndarray</span></dt><dd><p>Timestamps (in seconds since Unix epoch), for each recording
timepoint.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”depths”<span class="classifier">numpy.ndarray</span></dt><dd><p>Depths from the surface (in metres), with each entry
corresponding to each column in the <cite>signals</cite> data.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”Sv”<span class="classifier">numpy.ndarray</span></dt><dd><p>Echogram Sv data, shaped (num_timestamps, num_depths).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”mask”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array indicating which datapoints were kept (<cite>True</cite>)
and which removed (<cite>False</cite>) for the masked Sv output.
Shaped (num_timestamps, num_depths).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”turbulence”<span class="classifier">numpy.ndarray</span></dt><dd><p>For each timepoint, the depth of the shallowest datapoint which
should be included for the mask. Shaped (num_timestamps, ).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”bottom”<span class="classifier">numpy.ndarray</span></dt><dd><p>For each timepoint, the depth of the deepest datapoint which
should be included for the mask. Shaped (num_timestamps, ).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_passive”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array showing whether a timepoint is of passive data.
Shaped (num_timestamps, ). All passive recording data should
be excluded by the mask.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_removed”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array showing whether a timepoint is entirely removed
by the mask. Shaped (num_timestamps, ). Does not include
periods of passive recording.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_upward_facing”<span class="classifier">bool</span></dt><dd><p>Indicates whether the recording source is located at the
deepest depth (i.e. the seabed), facing upwards. Otherwise, the
recording source is at the shallowest depth (i.e. the surface),
facing downwards.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.make_lines_from_mask">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">make_lines_from_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_gap_squash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#make_lines_from_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.make_lines_from_mask" title="Permalink to this definition">#</a></dt>
<dd><p>Determines turbulence and bottom lines for a mask array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<em>array_like</em>) – A two-dimensional logical array, where for each row dimension 1 takes
the value <cite>False</cite> for some unknown continuous stretch at the start and
end of the column, with <cite>True</cite> values between these two masked-out
regions.</p></li>
<li><p><strong>depths</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Depth of each sample point along dim 1 of <cite>mask</cite>. Must be either
monotonically increasing or monotonically decreasing. Default is the
index of <cite>mask</cite>, <cite>arange(mask.shape[1])</cite>.</p></li>
<li><p><strong>max_gap_squash</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum gap to merge together, in metres. Default is <cite>1.</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>d_turbulence</strong> (<em>numpy.ndarray</em>) – Depth of turbulence line. This is the line of smaller depth which
separates the <cite>False</cite> region of <cite>mask</cite> from the central region of
<cite>True</cite> values. (If <cite>depths</cite> is monotonically increasing, this is
for the start of the columns of <cite>mask</cite>, otherwise it is at the end.)</p></li>
<li><p><strong>d_bottom</strong> (<em>numpy.ndarray</em>) – Depth of bottom line. As for <cite>d_turbulence</cite>, but for the other end of the
array.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.make_lines_from_masked_csv">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">make_lines_from_masked_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#make_lines_from_masked_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.make_lines_from_masked_csv" title="Permalink to this definition">#</a></dt>
<dd><p>Load a masked csv file output from Echoview and generate lines which
reproduce the mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to file containing masked Echoview output data in csv format.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>timestamps</strong> (<em>numpy.ndarray</em>) – Sample timestamps.</p></li>
<li><p><strong>d_turbulence</strong> (<em>numpy.ndarray</em>) – Depth of turbulence line.</p></li>
<li><p><strong>d_bottom</strong> (<em>numpy.ndarray</em>) – Depth of bottom line.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.remove_anomalies_1d">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">remove_anomalies_1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thr2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">201</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">31</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_filtered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#remove_anomalies_1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.remove_anomalies_1d" title="Permalink to this definition">#</a></dt>
<dd><p>Remove anomalies from a temporal signal.</p>
<p>Applies a median filter to the data, and replaces datapoints which
deviate from the median filtered signal by more than some threshold
with the median filtered data. This process is repeated until no
datapoints deviate from the filtered line by more than the threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> (<em>array_like</em>) – The signal to filter.</p></li>
<li><p><strong>thr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – The initial threshold will be <cite>thr</cite> times the standard deviation of the
residuals. The standard deviation is robustly estimated from the
interquartile range. Default is <cite>5</cite>.</p></li>
<li><p><strong>thr2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – The threshold for repeated iterations will be <cite>thr2</cite> times the standard
deviation of the remaining residuals. The standard deviation is
robustly estimated from interdecile range. Default is <cite>4</cite>.</p></li>
<li><p><strong>kernel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – The kernel size for the initial median filter. Default is <cite>201</cite>.</p></li>
<li><p><strong>kernel2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – The kernel size for subsequent median filters. Default is <cite>31</cite>.</p></li>
<li><p><strong>return_filtered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, the median filtered signal is also returned.
Default is <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>signal</strong> (<em>numpy.ndarray like signal</em>) – The input signal with anomalies replaced with median values.</p></li>
<li><p><strong>is_replaced</strong> (<em>bool numpy.ndarray shaped like signal</em>) – Indicator for which datapoints were replaced.</p></li>
<li><p><strong>filtered</strong> (<em>numpy.ndarray like signal, optional</em>) – The final median filtered signal. Returned if <cite>return_filtered=True</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.split_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">split_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">97.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">transect</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#split_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.split_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Splits a transect into segments each containing contiguous recordings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>array_like</em>) – A 1-d array containing the timestamp at which each recording was
measured. The sampling is assumed to high-frequency with
occassional gaps.</p></li>
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Threshold for splitting timestamps into segments. Any timepoints
further apart than <cite>threshold</cite> times the <cite>percentile</cite> percentile of the
difference between timepoints will be split apart into new segments.
Default is <cite>20</cite>.</p></li>
<li><p><strong>percentile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – The percentile at which to sample the timestamp intervals to establish
a baseline typical interval. Default is <cite>97.5</cite>.</p></li>
<li><p><strong>max_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>default=-1</em>) – Maximum length of each segment.
Set to <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">-1</span></code> to disable (default).</p></li>
<li><p><strong>pad_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>default=32</em>) – Amount of overlap between the segments. Set to <code class="docutils literal notranslate"><span class="pre">0</span></code> to disable.</p></li>
<li><p><strong>pad_on</strong> (<em>{&quot;max&quot;</em><em>, </em><em>&quot;thr&quot;</em><em>, </em><em>&quot;all&quot;</em><em>, </em><em>&quot;none&quot;}</em><em>, </em><em>default=&quot;max&quot;</em>) – Apply overlap padding when the transect is split due to either the total
length exceeding the maximum (<code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code>), the time delta exceeding the
threshold (<code class="docutils literal notranslate"><span class="pre">&quot;thr&quot;</span></code>), or both (<code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>).</p></li>
<li><p><strong>**kwargs</strong> – Arbitrary additional transect variables, which will be split into
segments as appropriate in accordance with <cite>timestamps</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>dict</em> – Containing segmented data, key/value pairs as per given in <cite>**kwargs</cite>
in addition to <cite>timestamps</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.manipulate.write_lines_for_masked_csv">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.manipulate.</span></span><span class="sig-name descname"><span class="pre">write_lines_for_masked_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/manipulate.html#write_lines_for_masked_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.manipulate.write_lines_for_masked_csv" title="Permalink to this definition">#</a></dt>
<dd><p>Write new turbulence and bottom lines based on csv containing masked Echoview
output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname_mask</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to input file containing masked Echoview output data in csv
format.</p></li>
<li><p><strong>fname_turbulence</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Destination of generated turbulence line, written in evl format. If <cite>None</cite>
(default), the output name is <cite>&lt;fname_base&gt;_mask-turbulence.evl</cite>, where
<cite>&lt;fname_base&gt;</cite> is <cite>fname_mask</cite> without extension and without any
occurence of the substrings <cite>_Sv_raw</cite> or <cite>_Sv</cite> in the base file name.</p></li>
<li><p><strong>fname_bottom</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Destination of generated bottom line, written in evl format. If <cite>None</cite>
(default), the output name is <cite>&lt;fname_base&gt;_mask-bottom.evl</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.raw.metadata">
<span id="echofilter-raw-metadata-module"></span><h2>echofilter.raw.metadata module<a class="headerlink" href="#module-echofilter.raw.metadata" title="Permalink to this headline">#</a></h2>
<p>Dataset metadata, relevant for loading correct data.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.metadata.recall_passive_edges">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.metadata.</span></span><span class="sig-name descname"><span class="pre">recall_passive_edges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/metadata.html#recall_passive_edges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.metadata.recall_passive_edges" title="Permalink to this definition">#</a></dt>
<dd><p>Defines passive data edges for samples within known datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to sample.</p></li>
<li><p><strong>timestamps</strong> (<em>array_like vector</em>) – Vector of timestamps in sample.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>passive_starts</strong> (<em>numpy.ndarray or None</em>) – Indices indicating the onset of passive data collection periods, or
<cite>None</cite> if passive metadata is unavailable for this sample.</p></li>
<li><p><strong>passive_ends</strong> (<em>numpy.ndarray or None</em>) – Indices indicating the offset of passive data collection periods, or
<cite>None</cite> if passive metadata is unavailable for this sample.</p></li>
<li><p><strong>finder_version</strong> (<em>absent or str</em>) – If <cite>passive_starts</cite> and <cite>passive_ends</cite>, this string may be present to
indicate which passive finder algorithm works best for this dataset.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.raw.shardloader">
<span id="echofilter-raw-shardloader-module"></span><h2>echofilter.raw.shardloader module<a class="headerlink" href="#module-echofilter.raw.shardloader" title="Permalink to this headline">#</a></h2>
<p>Converting raw data into shards, and loading data from shards.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.load_transect_from_shards">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">load_transect_from_shards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_rel_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#echofilter.raw.shardloader.load_transect_from_shards" title="Permalink to this definition">#</a></dt>
<dd><p>Load transect data from shard files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_rel_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect.</p></li>
<li><p><strong>i1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of first sample to retrieve. Default is <cite>0</cite>, the first sample.</p></li>
<li><p><strong>i2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of last sample to retrieve. As-per python convention, the range
<cite>i1</cite> to <cite>i2</cite> is inclusive on the left and exclusive on the right, so
datapoint <cite>i2 - 1</cite> is the right-most datapoint loaded. Default is
<cite>None</cite>, which loads everything up to and including to the last sample.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>segment</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Which segment to load. Default is <cite>0</cite>.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
<li><p><strong>**kwargs</strong> – As per <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>See <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.load_transect_from_shards_abs">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">load_transect_from_shards_abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_abs_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'edge'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#load_transect_from_shards_abs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="Permalink to this definition">#</a></dt>
<dd><p>Load transect data from shard files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_abs_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Absolute path to transect shard directory.</p></li>
<li><p><strong>i1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of first sample to retrieve. Default is <cite>0</cite>, the first sample.</p></li>
<li><p><strong>i2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of last sample to retrieve. As-per python convention, the range
<cite>i1</cite> to <cite>i2</cite> is inclusive on the left and exclusive on the right, so
datapoint <cite>i2 - 1</cite> is the right-most datapoint loaded. Default is
<cite>None</cite>, which loads everything up to and including to the last sample.</p></li>
<li><p><strong>pad_mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Padding method for out-of-bounds inputs. Must be supported by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.pad()</span></code>, such as <cite>“contast”</cite>, <cite>“reflect”</cite>, or <cite>“edge”</cite>. If the mode
is <cite>“contast”</cite>, the array will be padded with zeros. Default is “edge”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A dictionary with keys:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>”timestamps”<span class="classifier">numpy.ndarray</span></dt><dd><p>Timestamps (in seconds since Unix epoch), for each recording
timepoint. The number of entries, <cite>num_timestamps</cite>, is equal
to <cite>i2 - i1</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”depths”<span class="classifier">numpy.ndarray</span></dt><dd><p>Depths from the surface (in metres), with each entry
corresponding to each column in the <cite>signals</cite> data.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”Sv”<span class="classifier">numpy.ndarray</span></dt><dd><p>Echogram Sv data, shaped (num_timestamps, num_depths).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”mask”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array indicating which datapoints were kept (<cite>True</cite>)
and which removed (<cite>False</cite>) for the masked Sv output.
Shaped (num_timestamps, num_depths).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”turbulence”<span class="classifier">numpy.ndarray</span></dt><dd><p>For each timepoint, the depth of the shallowest datapoint which
should be included for the mask. Shaped (num_timestamps, ).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”bottom”<span class="classifier">numpy.ndarray</span></dt><dd><p>For each timepoint, the depth of the deepest datapoint which
should be included for the mask. Shaped (num_timestamps, ).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_passive”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array showing whether a timepoint is of passive data.
Shaped (num_timestamps, ). All passive recording data should
be excluded by the mask.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_removed”<span class="classifier">numpy.ndarray</span></dt><dd><p>Logical array showing whether a timepoint is entirely removed
by the mask. Shaped (num_timestamps, ). Does not include
periods of passive recording.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”is_upward_facing”<span class="classifier">bool</span></dt><dd><p>Indicates whether the recording source is located at the
deepest depth (i.e. the seabed), facing upwards. Otherwise, the
recording source is at the shallowest depth (i.e. the surface),
facing downwards.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.load_transect_from_shards_rel">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">load_transect_from_shards_rel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_rel_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#load_transect_from_shards_rel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.load_transect_from_shards_rel" title="Permalink to this definition">#</a></dt>
<dd><p>Load transect data from shard files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_rel_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect.</p></li>
<li><p><strong>i1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of first sample to retrieve. Default is <cite>0</cite>, the first sample.</p></li>
<li><p><strong>i2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Index of last sample to retrieve. As-per python convention, the range
<cite>i1</cite> to <cite>i2</cite> is inclusive on the left and exclusive on the right, so
datapoint <cite>i2 - 1</cite> is the right-most datapoint loaded. Default is
<cite>None</cite>, which loads everything up to and including to the last sample.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>segment</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Which segment to load. Default is <cite>0</cite>.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
<li><p><strong>**kwargs</strong> – As per <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>See <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.load_transect_segments_from_shards_abs">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">load_transect_segments_from_shards_abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_abs_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#load_transect_segments_from_shards_abs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.load_transect_segments_from_shards_abs" title="Permalink to this definition">#</a></dt>
<dd><p>Load transect data from shard files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_abs_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Absolute path to transect shard segments directory.</p></li>
<li><p><strong>segments</strong> (<em>iterable</em><em> or </em><em>None</em>) – Which segments to load. If <cite>None</cite> (default), all segments are loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>See <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.load_transect_segments_from_shards_rel">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">load_transect_segments_from_shards_rel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_rel_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#load_transect_segments_from_shards_rel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.load_transect_segments_from_shards_rel" title="Permalink to this definition">#</a></dt>
<dd><p>Load transect data from shard files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_rel_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>segments</strong> (<em>iterable</em><em> or </em><em>None</em>) – Which segments to load. If <cite>None</cite> (default), all segments are loaded.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
<li><p><strong>**kwargs</strong> – As per <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>See <a class="reference internal" href="#echofilter.raw.shardloader.load_transect_from_shards_abs" title="echofilter.raw.shardloader.load_transect_from_shards_abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_transect_from_shards_abs()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.segment_and_shard_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">segment_and_shard_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#segment_and_shard_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.segment_and_shard_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a sharded copy of a transect, with the transect cut into segments
based on recording starts/stops. Each segment is split across multiple
files (shards) for efficient loading.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect, excluding <cite>“_Sv_raw.csv”</cite>.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>max_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – The maximum depth to include in the saved shard. Data corresponding
to deeper locations is omitted to save on load time and memory when
the shard is loaded. If <cite>None</cite>, no cropping is applied.
Default is <cite>None</cite>.</p></li>
<li><p><strong>shard_len</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of timestamp samples to include in each shard. Default is <cite>128</cite>.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The segments will be written to the directories
<cite>&lt;root_data_dir&gt;_sharded/&lt;dataset&gt;/transect_path/&lt;segment&gt;/</cite>
For the contents of each directory, see <cite>write_transect_shards</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.shard_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">shard_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#echofilter.raw.shardloader.shard_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a sharded copy of a transect, with the transect cut into segments
based on recording starts/stops. Each segment is split across multiple
files (shards) for efficient loading.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Relative path to transect, excluding <cite>“_Sv_raw.csv”</cite>.</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Name of dataset. Default is <cite>“mobile”</cite>.</p></li>
<li><p><strong>max_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – The maximum depth to include in the saved shard. Data corresponding
to deeper locations is omitted to save on load time and memory when
the shard is loaded. If <cite>None</cite>, no cropping is applied.
Default is <cite>None</cite>.</p></li>
<li><p><strong>shard_len</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of timestamp samples to include in each shard. Default is <cite>128</cite>.</p></li>
<li><p><strong>root_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to root directory where data is located.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The segments will be written to the directories
<cite>&lt;root_data_dir&gt;_sharded/&lt;dataset&gt;/transect_path/&lt;segment&gt;/</cite>
For the contents of each directory, see <cite>write_transect_shards</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.shardloader.write_transect_shards">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.shardloader.</span></span><span class="sig-name descname"><span class="pre">write_transect_shards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/shardloader.html#write_transect_shards"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.shardloader.write_transect_shards" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a sharded copy of a transect, with the transect cut by timestamp
and split across multiple files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to output directory.</p></li>
<li><p><strong>transect</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Observed values for the transect. Should already be segmented.</p></li>
<li><p><strong>max_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – The maximum depth to include in the saved shard. Data corresponding
to deeper locations is omitted to save on load time and memory when
the shard is loaded. If <cite>None</cite>, no cropping is applied.
Default is <cite>None</cite>.</p></li>
<li><p><strong>shard_len</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of timestamp samples to include in each shard. Default is <cite>128</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The output will be written to the directory <cite>dirname</cite>, and will contain:</p>
<ul>
<li><p>a file named <cite>“shard_size.txt”</cite>, which contains the sharding metadata:
total number of samples, and shard size;</p></li>
<li><p>a directory for each shard, named 0, 1, …
Each shard directory will contain files:</p>
<blockquote>
<div><ul class="simple">
<li><p>depths.npy</p></li>
<li><p>timestamps.npy</p></li>
<li><p>Sv.npy</p></li>
<li><p>mask.npy</p></li>
<li><p>turbulence.npy</p></li>
<li><p>bottom.npy</p></li>
<li><p>is_passive.npy</p></li>
<li><p>is_removed.npy</p></li>
<li><p>is_upward_facing.npy</p></li>
</ul>
</div></blockquote>
<p>which contain pickled numpy dumps of the matrices for each shard.</p>
</li>
</ul>
</dd></dl>

</div>
<div class="section" id="module-echofilter.raw.utils">
<span id="echofilter-raw-utils-module"></span><h2>echofilter.raw.utils module<a class="headerlink" href="#module-echofilter.raw.utils" title="Permalink to this headline">#</a></h2>
<p>Loader utility functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.fillholes2d">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">fillholes2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#fillholes2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.fillholes2d" title="Permalink to this definition">#</a></dt>
<dd><p>Interpolate to replace NaN values in 2d gridded array data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<em>2d numpy.ndarray</em>) – Array in 2d which, may contain NaNs.</p></li>
<li><p><strong>nan_thr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>default=2</em>) – Minimum number of NaN values needed in a row/column for it
to be included in the (rectangular) area where NaNs are fixed.</p></li>
<li><p><strong>interp_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>default=&quot;linear&quot;</em>) – Interpolation method.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default=False</em>) – Whether to update arr instead of a copy.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>arr</strong> – Like input <code class="docutils literal notranslate"><span class="pre">arr</span></code>, but with NaN values replaced with
interpolated values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2d numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.integrate_area_of_contour">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">integrate_area_of_contour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_sign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#integrate_area_of_contour"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.integrate_area_of_contour" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the area within a contour, using Green’s algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>array_like vector</em>) – x co-ordinates of nodes along the contour.</p></li>
<li><p><strong>y</strong> (<em>array_like vector</em>) – y co-ordinates of nodes along the contour.</p></li>
<li><p><strong>closed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Whether the contour is already closed. If <cite>False</cite>, it will be closed
before deterimining the area. If <cite>None</cite> (default), it is automatically
determined as to whether the contour is already closed, and is closed
if necessary.</p></li>
<li><p><strong>preserve_sign</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to preserve the sign of the area. If <cite>True</cite>, the area is
positive if the contour is anti-clockwise and negative if it is
clockwise oriented. Default is <cite>False</cite>, which always returns a positive
area.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>area</strong> – The integral of the area witihn the contour.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Green%27s_theorem#Area_calculation">https://en.wikipedia.org/wiki/Green%27s_theorem#Area_calculation</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.interp1d_preserve_nan">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">interp1d_preserve_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_samples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#interp1d_preserve_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.interp1d_preserve_nan" title="Permalink to this definition">#</a></dt>
<dd><p>Interpolate a 1-D function, preserving NaNs.</p>
<p><cite>x</cite> and <cite>y</cite> are arrays of values used to approximate some function f:
<code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">f(x)</span></code>.  We exclude NaNs for the interpolation and then mask out
entries which are adjacent (or close to) a NaN in the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>(</em><em>N</em><em>,</em><em>) </em><em>array_like</em>) – A 1-D array of real values. Must not contain NaNs.</p></li>
<li><p><strong>y</strong> (<em>(</em><em>...</em><em>,</em><em>N</em><em>,</em><em>...</em><em>) </em><em>array_like</em>) – A N-D array of real values. The length of <cite>y</cite> along the interpolation
axis must be equal to the length of <cite>x</cite>. May contain NaNs.</p></li>
<li><p><strong>x_samples</strong> (<em>array_like</em>) – A 1-D array of real values at which the interpolation function will
be sampled.</p></li>
<li><p><strong>nan_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Minimum amount of influence a NaN must have on an output sample for it
to become a NaN. Default is <cite>0.</cite> i.e. any influence.</p></li>
<li><p><strong>bounds_error</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, a ValueError is raised any time interpolation is attempted
on a value outside of the range of <cite>x</cite> (where extrapolation is
necessary). If <cite>False</cite> (default), out of bounds values are assigned
value <cite>fill_value</cite> (whose default is NaN).</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments are as per <code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.interpolate.interp1d()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>y_samples</strong> – The result of interpolating, with sample points close to NaNs in the
input returned as NaN.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(…,N,…) np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.medfilt1d">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">medfilt1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'reflect'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#medfilt1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.medfilt1d" title="Permalink to this definition">#</a></dt>
<dd><p>Median filter in 1d, with support for selecting padding mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> (<em>array_like</em>) – The signal to filter.</p></li>
<li><p><strong>kernel_size</strong> – Size of the median kernel to use.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Which axis to operate along. Default is <cite>-1</cite>.</p></li>
<li><p><strong>pad_mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – Method with which to pad the vector at the edges.
Must be supported by <code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.pad()</span></code>. Default is <cite>“reflect”</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filtered</strong> – The filtered signal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">-</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">-</span></code></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.pad1d">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">pad1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#pad1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.pad1d" title="Permalink to this definition">#</a></dt>
<dd><p>Pad an array along a single axis only.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarary</em>) – Array to be padded.</p></li>
<li><p><strong>pad_width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – The amount to pad, either a length two tuple of values for each edge,
or an int if the padding should be the same for each side.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – The axis to pad. Default is <cite>0</cite>.</p></li>
<li><p><strong>**kwargs</strong> – As per <code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.pad()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Padded array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarary</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.pad.html#numpy.pad" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.pad</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.raw.utils.squash_gaps">
<span class="sig-prename descclassname"><span class="pre">echofilter.raw.utils.</span></span><span class="sig-name descname"><span class="pre">squash_gaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_gap_squash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/raw/utils.html#squash_gaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.raw.utils.squash_gaps" title="Permalink to this definition">#</a></dt>
<dd><p>Merge small gaps between zero values in a boolean array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<em>boolean array</em>) – The input mask, with small gaps between zero values which will be
squashed with zeros.</p></li>
<li><p><strong>max_gap_squash</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Maximum length of gap to squash.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Axis on which to operate. Default is <cite>-1</cite>.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to operate on the original array. If <cite>False</cite>, a copy is
created and returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>merged_mask</strong> – Mask as per the input, but with small gaps squashed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean array</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="echofilter.optim.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">echofilter.optim package</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="echofilter.ui.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">echofilter.ui package</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Scott C. Lowe<br/>
  
      &copy; Copyright 2022, Scott C. Lowe.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>echofilter package &#8212; Echofilter 1.0.dev0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="echofilter.data package" href="echofilter.data.html" />
    <link rel="prev" title="API Reference" href="modules.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Echofilter 1.0.dev0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../usage_guide.html">
   Usage Guide
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../programs/programs.html">
   CLI Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/inference.html">
     echofilter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/ev2csv.html">
     ev2csv
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/train.html">
     echofilter-train
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/generate_shards.html">
     echofilter-generate-shards
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="modules.html">
   API Reference
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="current reference internal" href="#">
     echofilter package
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.data.html">
       echofilter.data package
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="echofilter.nn.html">
       echofilter.nn package
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="echofilter.nn.modules.html">
         echofilter.nn.modules package
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.optim.html">
       echofilter.optim package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.raw.html">
       echofilter.raw package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.ui.html">
       echofilter.ui package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="echofilter.win.html">
       echofilter.win package
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   Changelog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../py-modindex.html">
   Module Index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../genindex.html">
   Index
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/source/packages/echofilter.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subpackages">
   Subpackages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.ev2csv">
   echofilter.ev2csv module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.generate_shards">
   echofilter.generate_shards module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.inference">
   echofilter.inference module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.path">
   echofilter.path module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.plotting">
   echofilter.plotting module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.train">
   echofilter.train module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.utils">
   echofilter.utils module
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>echofilter package</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subpackages">
   Subpackages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.ev2csv">
   echofilter.ev2csv module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.generate_shards">
   echofilter.generate_shards module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.inference">
   echofilter.inference module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.path">
   echofilter.path module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.plotting">
   echofilter.plotting module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.train">
   echofilter.train module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-echofilter.utils">
   echofilter.utils module
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="module-echofilter">
<span id="echofilter-package"></span><h1>echofilter package<a class="headerlink" href="#module-echofilter" title="Permalink to this headline">#</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">#</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="echofilter.data.html">echofilter.data package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.data.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.data.html#module-echofilter.data.dataset">echofilter.data.dataset module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.data.html#module-echofilter.data.transforms">echofilter.data.transforms module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.data.html#module-echofilter.data.utils">echofilter.data.utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="echofilter.nn.html">echofilter.nn package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.nn.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="echofilter.nn.modules.html">echofilter.nn.modules package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#module-echofilter.nn.modules.activations">echofilter.nn.modules.activations module</a></li>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#module-echofilter.nn.modules.blocks">echofilter.nn.modules.blocks module</a></li>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#module-echofilter.nn.modules.conv">echofilter.nn.modules.conv module</a></li>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#module-echofilter.nn.modules.pathing">echofilter.nn.modules.pathing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="echofilter.nn.modules.html#module-echofilter.nn.modules.utils">echofilter.nn.modules.utils module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.nn.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.nn.html#module-echofilter.nn.unet">echofilter.nn.unet module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.nn.html#module-echofilter.nn.utils">echofilter.nn.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.nn.html#module-echofilter.nn.wrapper">echofilter.nn.wrapper module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="echofilter.optim.html">echofilter.optim package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#module-echofilter.optim.criterions">echofilter.optim.criterions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#module-echofilter.optim.meters">echofilter.optim.meters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#module-echofilter.optim.schedulers">echofilter.optim.schedulers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#module-echofilter.optim.torch_backports">echofilter.optim.torch_backports module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.optim.html#module-echofilter.optim.utils">echofilter.optim.utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="echofilter.raw.html">echofilter.raw package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#module-echofilter.raw.loader">echofilter.raw.loader module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#module-echofilter.raw.manipulate">echofilter.raw.manipulate module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#module-echofilter.raw.metadata">echofilter.raw.metadata module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#module-echofilter.raw.shardloader">echofilter.raw.shardloader module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.raw.html#module-echofilter.raw.utils">echofilter.raw.utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="echofilter.ui.html">echofilter.ui package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#module-echofilter.ui.checkpoints">echofilter.ui.checkpoints module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#module-echofilter.ui.formatters">echofilter.ui.formatters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#module-echofilter.ui.inference_cli">echofilter.ui.inference_cli module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#module-echofilter.ui.style">echofilter.ui.style module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.ui.html#module-echofilter.ui.train_cli">echofilter.ui.train_cli module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="echofilter.win.html">echofilter.win package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="echofilter.win.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.win.html#module-echofilter.win.ev">echofilter.win.ev module</a></li>
<li class="toctree-l2"><a class="reference internal" href="echofilter.win.html#module-echofilter.win.manager">echofilter.win.manager module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">#</a></h2>
</div>
<div class="section" id="module-echofilter.ev2csv">
<span id="echofilter-ev2csv-module"></span><h2>echofilter.ev2csv module<a class="headerlink" href="#module-echofilter.ev2csv" title="Permalink to this headline">#</a></h2>
<p>Export raw EV files in CSV format.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.ev2csv.ev2csv">
<span class="sig-prename descclassname"><span class="pre">echofilter.ev2csv.</span></span><span class="sig-name descname"><span class="pre">ev2csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Fileset1:</span> <span class="pre">Sv</span> <span class="pre">pings</span> <span class="pre">T1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_app</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/ev2csv.html#ev2csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.ev2csv.ev2csv" title="Permalink to this definition">#</a></dt>
<dd><p>Export a single EV file to CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to input file.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Filename of output destination.</p></li>
<li><p><strong>variable_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the Echoview acoustic variable to export. Default is
<cite>“Fileset1: Sv pings T1”</cite>.</p></li>
<li><p><strong>ev_app</strong> (<em>win32com.client.Dispatch object</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – An object which can be used to interface with the Echoview application,
as returned by <cite>win32com.client.Dispatch</cite>. If <cite>None</cite> (default), a
new instance of the application is opened (and closed on completion).</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Level of verbosity. Default is <cite>0</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>destination</strong> – Absolute path to <cite>destination</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.ev2csv.get_parser">
<span class="sig-prename descclassname"><span class="pre">echofilter.ev2csv.</span></span><span class="sig-name descname"><span class="pre">get_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/ev2csv.html#get_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.ev2csv.get_parser" title="Permalink to this definition">#</a></dt>
<dd><p>Build parser for ev2csv command line interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>parser</strong> – CLI argument parser for ev2csv.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.11)">argparse.ArgumentParser</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.ev2csv.main">
<span class="sig-prename descclassname"><span class="pre">echofilter.ev2csv.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/ev2csv.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.ev2csv.main" title="Permalink to this definition">#</a></dt>
<dd><p>Run ev2csv command line interface.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.ev2csv.run_ev2csv">
<span class="sig-prename descclassname"><span class="pre">echofilter.ev2csv.</span></span><span class="sig-name descname"><span class="pre">run_ev2csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Fileset1:</span> <span class="pre">Sv</span> <span class="pre">pings</span> <span class="pre">T1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive_dir_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimize_echoview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide_echoview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'new'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/ev2csv.html#run_ev2csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.ev2csv.run_ev2csv" title="Permalink to this definition">#</a></dt>
<dd><p>Export EV files to raw CSV files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paths</strong> (<em>iterable</em>) – Paths to input EV files to process, or directories containing EV files.
These may be full paths or paths relative to <cite>source_dir</cite>. For each
folder specified, any files with extension <cite>“csv”</cite> within the folder
and all its tree of subdirectories will be processed.</p></li>
<li><p><strong>variable_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the Echoview acoustic variable to export. Default is
<cite>“Fileset1: Sv pings T1”</cite>.</p></li>
<li><p><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Path to directory where files are found. Default is <cite>“.”</cite>.</p></li>
<li><p><strong>recursive_dir_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – How to handle directory inputs in <cite>paths</cite>. If <cite>False</cite>, only files
(with the correct extension) in the directory will be included.
If <cite>True</cite>, subdirectories will also be walked through to find input
files. Default is <cite>True</cite>.</p></li>
<li><p><strong>output_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Directory where output files will be written. If this is an empty
string (<cite>“”</cite>, default), outputs are written to the same directory as
each input file. Otherwise, they are written to <cite>output_dir</cite>,
preserving their path relative to <cite>source_dir</cite> if relative paths were
used.</p></li>
<li><p><strong>suffix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Output filename suffix. Default is <cite>“_Sv_raw.csv”</cite> if <cite>keep_ext=False</cite>,
or <cite>“.Sv_raw.csv”</cite> if <cite>keep_ext=True</cite>.</p></li>
<li><p><strong>keep_ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to preserve the file extension in the input file name when
generating output file name. Default is <cite>False</cite>, removing the
extension.</p></li>
<li><p><strong>skip_existing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to skip processing files whose destination paths already
exist. If <cite>False</cite> (default), an error is raised if the destination file
already exists.</p></li>
<li><p><strong>overwrite_existing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to overwrite existing output files. If <cite>False</cite> (default), an
error is raised if the destination file already exists.</p></li>
<li><p><strong>minimize_echoview</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, the Echoview window being used will be minimized while this
function is running. Default is <cite>False</cite>.</p></li>
<li><p><strong>hide_echoview</strong> (<em>{&quot;never&quot;</em><em>, </em><em>&quot;new&quot;</em><em>, </em><em>&quot;always&quot;}</em><em>, </em><em>optional</em>) – Whether to hide the Echoview window entirely while the code runs.
If <cite>hide_echoview=”new”</cite>, the application is only hidden if it
was created by this function, and not if it was already running.
If <cite>hide_echoview=”always”</cite>, the application is hidden even if it was
already running. In the latter case, the window will be revealed again
when this function is completed. Default is <cite>“new”</cite>.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Level of verbosity. Default is <cite>1</cite>.</p></li>
<li><p><strong>dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, perform a trial run with no changes made. Default is
<cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Paths to generated CSV files.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.generate_shards">
<span id="echofilter-generate-shards-module"></span><h2>echofilter.generate_shards module<a class="headerlink" href="#module-echofilter.generate_shards" title="Permalink to this headline">#</a></h2>
<p>Convert dataset of CSV exports from Echoview into shards.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.generate_shards.generate_shard">
<span class="sig-prename descclassname"><span class="pre">echofilter.generate_shards.</span></span><span class="sig-name descname"><span class="pre">generate_shard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect_pth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_gracefully</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/generate_shards.html#generate_shard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.generate_shards.generate_shard" title="Permalink to this definition">#</a></dt>
<dd><p>Shard a single transect.</p>
<p>Wrapper around echofilter.raw.shardloader.segment_and_shard_transect which
adds verboseness and graceful failure options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect_pth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Relative path to transect.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to print which transect is being processed. Default is <cite>False</cite>.</p></li>
<li><p><strong>fail_gracefully</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, any transect which triggers an errors during processing
will be printed out, but processing the rest of the transects will
continue. If <cite>False</cite>, the process will halt with an error as soon as
any single transect hits an error. Default is <cite>True</cite>.</p></li>
<li><p><strong>**kwargs</strong> – See <a class="reference internal" href="echofilter.raw.html#echofilter.raw.shardloader.segment_and_shard_transect" title="echofilter.raw.shardloader.segment_and_shard_transect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">echofilter.raw.shardloader.segment_and_shard_transect()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.generate_shards.generate_shards">
<span class="sig-prename descclassname"><span class="pre">echofilter.generate_shards.</span></span><span class="sig-name descname"><span class="pre">generate_shards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitioning_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'firstpass'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress_bar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_gracefully</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/generate_shards.html#generate_shards"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.generate_shards.generate_shards" title="Permalink to this definition">#</a></dt>
<dd><p>Shard all transections in one partition of a dataset.</p>
<p>Wrapper around echofilter.raw.shardloader.segment_and_shard_transect which
adds verboseness and graceful failure options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the partition to process (<cite>‘train’</cite>, <cite>‘validate’</cite>, <cite>‘test’</cite>,
etc).</p></li>
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the dataset to process (<cite>‘mobile’</cite>, <cite>‘MinasPassage’</cite>, etc).</p></li>
<li><p><strong>partitioning_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the partition version to use process. Default is <cite>‘firstpass’</cite>.</p></li>
<li><p><strong>progress_bar</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to output a progress bar using <cite>tqdm</cite>. Default is <cite>False</cite>.</p></li>
<li><p><strong>ncores</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of cores to use for multiprocessing. To disable multiprocessing,
set to <cite>1</cite>. Set to <cite>None</cite> to use all available cores.
Default is <cite>None</cite>.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to print which transect is being processed. Default is <cite>False</cite>.</p></li>
<li><p><strong>fail_gracefully</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, any transect which triggers an errors during processing
will be printed out, but processing the rest of the transects will
continue. If <cite>False</cite>, the process will halt with an error as soon as
any single transect hits an error. Default is <cite>True</cite>.</p></li>
<li><p><strong>**kwargs</strong> – See <cite>echofilter.raw.shardloader.segment_and_shard_transect</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.generate_shards.get_parser">
<span class="sig-prename descclassname"><span class="pre">echofilter.generate_shards.</span></span><span class="sig-name descname"><span class="pre">get_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/generate_shards.html#get_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.generate_shards.get_parser" title="Permalink to this definition">#</a></dt>
<dd><p>Build parser for command line interface for generating shards.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>parser</strong> – CLI argument parser for generating shards.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.11)">argparse.ArgumentParser</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.generate_shards.main">
<span class="sig-prename descclassname"><span class="pre">echofilter.generate_shards.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/generate_shards.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.generate_shards.main" title="Permalink to this definition">#</a></dt>
<dd><p>Command line interface for generating dataset shards from CSV files.</p>
</dd></dl>

</div>
<div class="section" id="module-echofilter.inference">
<span id="echofilter-inference-module"></span><h2>echofilter.inference module<a class="headerlink" href="#module-echofilter.inference" title="Permalink to this headline">#</a></h2>
<p>Inference routine.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.inference.get_color_palette">
<span class="sig-prename descclassname"><span class="pre">echofilter.inference.</span></span><span class="sig-name descname"><span class="pre">get_color_palette</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_xkcd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/inference.html#get_color_palette"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.inference.get_color_palette" title="Permalink to this definition">#</a></dt>
<dd><p>Provide a mapping of named colors from matplotlib.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>include_xkcd</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to include the XKCD color palette in the output.
Note that XKCD colors have <cite>“xkcd:”</cite> prepended to their names to
prevent collisions with official named colors from CSS4.
Default is <cite>True</cite>.
See <a class="reference external" href="https://xkcd.com/color/rgb/">https://xkcd.com/color/rgb/</a> and
<a class="reference external" href="https://blog.xkcd.com/2010/05/03/color-survey-results/">https://blog.xkcd.com/2010/05/03/color-survey-results/</a>
for the XKCD colors.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>colors</strong> – Mapping from names of colors as strings to color value, either as
an RGB tuple (fractional, 0 to 1 range) or a hexadecimal string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.inference.hexcolor2rgb8">
<span class="sig-prename descclassname"><span class="pre">echofilter.inference.</span></span><span class="sig-name descname"><span class="pre">hexcolor2rgb8</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/inference.html#hexcolor2rgb8"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.inference.hexcolor2rgb8" title="Permalink to this definition">#</a></dt>
<dd><p>Utility for mapping hexadecimal colors to uint8 RGB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>color</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – A hexadecimal color string, with leading “#”.
If the input is not a string beginning with “#”, it is returned as-is
without raising an error.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>RGB color tuple, in uint8 format (0–255).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.inference.import_lines_regions_to_ev">
<span class="sig-prename descclassname"><span class="pre">echofilter.inference.</span></span><span class="sig-name descname"><span class="pre">import_lines_regions_to_ev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ev_fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearfield_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_nearfield_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines_cutoff_at_nearfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_thicknesses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_app</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common_notes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/inference.html#import_lines_regions_to_ev"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.inference.import_lines_regions_to_ev" title="Permalink to this definition">#</a></dt>
<dd><p>Write lines and regions to EV file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ev_fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to Echoview file to import variables into.</p></li>
<li><p><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Mapping from output keys to filenames.</p></li>
<li><p><strong>target_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Mapping from output keys to output variable names.</p></li>
<li><p><strong>nearfield_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Depth at which nearfield line will be placed. If <cite>None</cite> (default), no
nearfield line will be added, irrespective of <cite>add_nearfield_line</cite>.</p></li>
<li><p><strong>add_nearfield_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to add a nearfield line. Default is <cite>True</cite>.</p></li>
<li><p><strong>lines_cutoff_at_nearfield</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Which lines (if any) should be clipped at the nearfield depth.
Default is <cite>[]</cite>.</p></li>
<li><p><strong>offsets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Amount of offset for each line.</p></li>
<li><p><strong>line_colors</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Mapping from output keys to line colours.</p></li>
<li><p><strong>line_thicknesses</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Mapping from output keys to line thicknesses.</p></li>
<li><p><strong>ev_app</strong> (<em>win32com.client.Dispatch object</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – An object which can be used to interface with the Echoview application,
as returned by <cite>win32com.client.Dispatch</cite>. If <cite>None</cite> (default), a
new instance of the application is opened (and closed on completion).</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether existing lines with target names should be replaced.
If a line with the target name already exists and <cite>overwrite=False</cite>,
the line is named with the current datetime to prevent collisions.
Default is <cite>False</cite>.</p></li>
<li><p><strong>common_notes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Notes to include for every region. Default is <cite>“”</cite>.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Verbosity level. Default is <cite>1</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.inference.inference_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.inference.</span></span><span class="sig-name descname"><span class="pre">inference_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_min_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocrop_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.35</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_unconditioned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_deviation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stdev'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/inference.html#inference_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.inference.inference_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Run inference on a single transect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>echofilter.wrapper.Echofilter</em>) – A pytorch Module wrapped in an Echofilter UI layer.</p></li>
<li><p><strong>timestamps</strong> (<em>array_like</em>) – Sample recording timestamps (in seconds since Unix epoch). Must be a
vector.</p></li>
<li><p><strong>depths</strong> (<em>array_like</em>) – Recording depths from the surface (in metres). Must be a vector.</p></li>
<li><p><strong>signals</strong> (<em>array_like</em>) – Echogram Sv data. Must be a matrix shaped
<cite>(len(timestamps), len(depths))</cite>.</p></li>
<li><p><strong>image_height</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Height to resize echogram before passing through model.</p></li>
<li><p><strong>facing</strong> (<em>{&quot;downward&quot;</em><em>, </em><em>&quot;upward&quot;</em><em>, </em><em>&quot;auto&quot;}</em><em>, </em><em>optional</em>) – Orientation in which the echosounder is facing. Default is <cite>“auto”</cite>,
in which case the orientation is determined from the ordering of the
depth values in the data (increasing = <cite>“upward”</cite>,
decreasing = <cite>“downward”</cite>).</p></li>
<li><p><strong>crop_min_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Minimum depth to include in input. If <cite>None</cite> (default), there is no
minimum depth.</p></li>
<li><p><strong>crop_max_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Maxmimum depth to include in input. If <cite>None</cite> (default), there is no
maximum depth.</p></li>
<li><p><strong>autocrop_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Minimum fraction of input height which must be found to be removable
for the model to be re-run with an automatically cropped input.
Default is 0.35.</p></li>
<li><p><strong>force_unconditioned</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to always use unconditioned logit outputs when deteriming the
new depth range for automatic cropping.</p></li>
<li><p><strong>data_center</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Center point to use, which will be subtracted from the Sv signals
(i.e. the overall sample mean).
If <cite>data_center</cite> is a string, it specifies the method to use to
determine the center value from the distribution of intensities seen
in this sample transect. Default is <cite>“mean”</cite>.</p></li>
<li><p><strong>data_deviation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Deviation to use to normalise the Sv signals in divisive manner
(i.e. the overall sample standard deviation).
If <cite>data_deviation</cite> is a string, it specifies the method to use to
determine the center value from the distribution of intensities seen
in this sample transect. Default is <cite>“stdev”</cite>.</p></li>
<li><p><strong>nan_value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Placeholder value to replace NaNs with. Default is <cite>-3</cite>.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype" title="(in PyTorch v1.13)"><em>torch.dtype</em></a><em>, </em><em>optional</em>) – Datatype to use for model input. Default is <cite>torch.float</cite>.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Level of verbosity. Default is <cite>0</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with fields as output by <cite>echofilter.wrapper.Echofilter</cite>,
plus <cite>timestamps</cite> and <cite>depths</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.inference.run_inference">
<span class="sig-prename descclassname"><span class="pre">echofilter.inference.</span></span><span class="sig-name descname"><span class="pre">run_inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive_dir_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_incompatible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continue_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_ev_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">import_into_evfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_turbulence_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_bottom_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_surface_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_nearfield_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'orangered'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_turbulence_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'orangered'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_bottom_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'green'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_surface_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_nearfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mediumseagreen'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_turbulence_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_bottom_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_surface_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness_nearfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_turbulence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_at_nearfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines_during_passive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'interpolate-time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_passive_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_removed_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_passive_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_removed_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_patch_area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Fileset1:</span> <span class="pre">Sv</span> <span class="pre">pings</span> <span class="pre">T1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_len_selector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mode'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_training_standardization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_min_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocrop_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.35</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_unconditioned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logit_smoothing_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide_echoview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'new'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimize_echoview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/inference.html#run_inference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.inference.run_inference" title="Permalink to this definition">#</a></dt>
<dd><p>Perform inference on input files, and write output lines in EVL and regions
in EVR file formats.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paths</strong> (<em>iterable</em>) – Files and folders to be processed. These may be full paths or paths
relative to <cite>source_dir</cite>. For each folder specified, any files with
extension <cite>“csv”</cite> within the folder and all its tree of subdirectories
will be processed.</p></li>
<li><p><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Path to directory where files are found. Default is <cite>“.”</cite>.</p></li>
<li><p><strong>recursive_dir_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – How to handle directory inputs in <cite>paths</cite>. If <cite>False</cite>, only files
(with the correct extension) in the directory will be included.
If <cite>True</cite>, subdirectories will also be walked through to find input
files. Default is <cite>True</cite>.</p></li>
<li><p><strong>extensions</strong> (<em>iterable</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – File extensions to detect when running on a directory. Default is
<cite>“csv”</cite>.</p></li>
<li><p><strong>skip_existing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Skip processing files which already have all outputs present. Default
is <cite>False</cite>.</p></li>
<li><p><strong>skip_incompatible</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Skip processing CSV files which do not seem to contain an exported
Echoview transect. If <cite>False</cite>, an error is raised. Default is <cite>False</cite>.</p></li>
<li><p><strong>output_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Directory where output files will be written. If this is an empty
string (<cite>“”</cite>, default), outputs are written to the same directory as
each input file. Otherwise, they are written to <cite>output_dir</cite>,
preserving their path relative to <cite>source_dir</cite> if relative paths were
used.</p></li>
<li><p><strong>dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, perform a trial run with no changes made. Default is
<cite>False</cite>.</p></li>
<li><p><strong>continue_on_error</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>default=False</em>) – Continue running on remaining files if one file hits an error.</p></li>
<li><p><strong>overwrite_existing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Overwrite existing outputs without producing a warning message. If
<cite>False</cite>, an error is generated if files would be overwritten.
Default is <cite>False</cite>.</p></li>
<li><p><strong>overwrite_ev_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Overwrite existing lines within the Echoview file without warning.
If <cite>False</cite> (default), the current datetime will be appended to line
variable names in the event of a collision.</p></li>
<li><p><strong>import_into_evfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to import the output lines and regions into the EV file,
whenever the file being processed in an EV file. Default is <cite>True</cite>.</p></li>
<li><p><strong>generate_turbulence_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to output an evl file for the turbulence line. If this is
<cite>False</cite>, the turbulence line is also never imported into Echoview.
Default is <cite>True</cite>.</p></li>
<li><p><strong>generate_bottom_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to output an evl file for the bottom line. If this is <cite>False</cite>,
the bottom line is also never imported into Echoview.
Default is <cite>True</cite>.</p></li>
<li><p><strong>generate_surface_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to output an evl file for the surface line. If this is <cite>False</cite>,
the surface line is also never imported into Echoview.
Default is <cite>True</cite>.</p></li>
<li><p><strong>add_nearfield_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to add a nearfield line to the EV file in Echoview.
Default is <cite>True</cite>.</p></li>
<li><p><strong>suffix_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Suffix to append to output artifacts (evl and evr files), between
the name of the file and the extension. If <cite>suffix_file</cite> begins with
an alphanumeric character, <cite>“-“</cite> is prepended. Default is <cite>“”</cite>.</p></li>
<li><p><strong>suffix_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Suffix to append to line and region names when imported back into
EV file. If <cite>suffix_var</cite> begins with an alphanumeric character, <cite>“-“</cite>
is prepended. If <cite>None</cite> (default), suffix_var will match <cite>suffix_file</cite>
if it is set, and will be “_echofilter” otherwise.</p></li>
<li><p><strong>color_turbulence</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Color to use for the turbulence line when it is imported into Echoview.
This can either be the name of a supported color from
matplotlib.colors, or a hexadecimal color, or a string representation
of an RGB color to supply directly to Echoview (such as “(0,255,0)”).
Default is <cite>“orangered”</cite>.</p></li>
<li><p><strong>color_turbulence_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Color to use for the offset turbulence line when it is imported into
Echoview. If <cite>None</cite> (default) <cite>color_turbulence</cite> is used.</p></li>
<li><p><strong>color_bottom</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Color to use for the bottom line when it is imported into Echoview.
This can either be the name of a supported color from
matplotlib.colors, or a hexadecimal color, or a string representation
of an RGB color to supply directly to Echoview (such as “(0,255,0)”).
Default is <cite>“orangered”</cite>.</p></li>
<li><p><strong>color_bottom_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Color to use for the offset bottom line when it is imported into
Echoview. If <cite>None</cite> (default) <cite>color_bottom</cite> is used.</p></li>
<li><p><strong>color_surface</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Color to use for the surface line when it is imported into Echoview.
This can either be the name of a supported color from
matplotlib.colors, or a hexadecimal color, or a string representation
of an RGB color to supply directly to Echoview (such as “(0,255,0)”).
Default is <cite>“green”</cite>.</p></li>
<li><p><strong>color_surface_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Color to use for the offset surface line when it is imported into
Echoview. If <cite>None</cite> (default) <cite>color_surface</cite> is used.</p></li>
<li><p><strong>color_nearfield</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Color to use for the nearfield line when it is created in Echoview.
This can either be the name of a supported color from
matplotlib.colors, or a hexadecimal color, or a string representation
of an RGB color to supply directly to Echoview (such as “(0,255,0)”).
Default is <cite>“mediumseagreen”</cite>.</p></li>
<li><p><strong>thickness_turbulence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Thickness with which the turbulence line will be displayed in Echoview.
Default is <cite>2</cite>.</p></li>
<li><p><strong>thickness_turbulence_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Thickness with which the offset turbulence line will be displayed in
Echoview. If <cite>None</cite> (default) <cite>thickness_turbulence</cite> is used.</p></li>
<li><p><strong>thickness_bottom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Thickness with which the bottom line will be displayed in Echoview.
Default is <cite>2</cite>.</p></li>
<li><p><strong>thickness_bottom_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Thickness with which the offset bottom line will be displayed in
Echoview. If <cite>None</cite> (default) <cite>thickness_bottom</cite> is used.</p></li>
<li><p><strong>thickness_surface</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Thickness with which the surface line will be displayed in Echoview.
Default is <cite>1</cite>.</p></li>
<li><p><strong>thickness_surface_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Thickness with which the offset surface line will be displayed in
Echoview. If <cite>None</cite> (default) <cite>thickness_surface</cite> is used.</p></li>
<li><p><strong>thickness_nearfield</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Thickness with which the nearfield line will be displayed in Echoview.
Default is <cite>1</cite>.</p></li>
<li><p><strong>cache_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Path to directory where downloaded checkpoint files should be cached.
If <cite>None</cite> (default), an OS-appropriate application-specific default
cache directory is used.</p></li>
<li><p><strong>cache_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Path to directory where CSV files generated from EV inputs should be
cached. If <cite>None</cite> (default), EV files which are exported to CSV files
are temporary files, deleted after this program has completed. If
<cite>cache_csv=””</cite>, the CSV files are cached in the same directory as the
input EV files.</p></li>
<li><p><strong>suffix_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Suffix used for cached CSV files which are exported from EV files.
If <cite>suffix_file</cite> begins with an alphanumeric character, a delimiter
is prepended. The delimiter is <cite>“.”</cite> if <cite>keep_ext=True</cite> or <cite>“-“</cite> if
<cite>keep_ext=False</cite>. Default is <cite>“”</cite>.</p></li>
<li><p><strong>keep_ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to preserve the file extension in the input file name when
generating output file name. Default is <cite>False</cite>, removing the
extension.</p></li>
<li><p><strong>line_status</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – <p>Status to use for the lines.
Must be one of:</p>
<ul>
<li><p><cite>0</cite> : none</p></li>
<li><p><cite>1</cite> : unverified</p></li>
<li><p><cite>2</cite> : bad</p></li>
<li><p><cite>3</cite> : good</p></li>
</ul>
<p>Default is <cite>3</cite>.</p>
</p></li>
<li><p><strong>offset_turbulence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Offset for turbulence line, which moves the turbulence line deeper.
Default is <cite>1.0</cite>.</p></li>
<li><p><strong>offset_bottom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Offset for bottom line, which moves the line to become more shallow.
Default is <cite>1.0</cite>.</p></li>
<li><p><strong>offset_surface</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Offset for surface line, which moves the surface line deeper.
Default is <cite>1.0</cite>.</p></li>
<li><p><strong>nearfield</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Nearfield approach distance, in metres.
If the echogram is downward facing, the nearfield cutoff depth
will be at a depth equal to the nearfield distance.
If the echogram is upward facing, the nearfield cutoff will be
<cite>nearfield</cite> meters above the deepest depth recorded in the input
data.
When processing an EV file, by default a nearfield line will be
added at the nearfield cutoff depth. To prevent this behaviour,
use the –no-nearfield-line argument.
Default is <cite>1.7</cite>.</p></li>
<li><p><strong>cutoff_at_nearfield</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Whether to cut-off the turbulence line (for downfacing data) or bottom
line (for upfacing) when it is closer to the echosounder than the
<cite>nearfield</cite> distance.
If <cite>None</cite> (default), the bottom line is clipped (for upfacing data),
but the turbulence line is not clipped (even with downfacing data).</p></li>
<li><p><strong>lines_during_passive</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Method used to handle line depths during collection
periods determined to be passive recording instead of
active recording.
Options are:</p>
<dl class="simple">
<dt><cite>”interpolate-time”</cite></dt><dd><p>depths are linearly interpolated from active
recording periods, using the time at which
recordings where made.</p>
</dd>
<dt><cite>”interpolate-index”</cite></dt><dd><p>depths are linearly interpolated from active
recording periods, using the index of the
recording.</p>
</dd>
<dt><cite>”predict”</cite></dt><dd><p>the model’s prediction for the lines during
passive data collection will be kept; the nature
of the prediction depends on how the model was
trained.</p>
</dd>
<dt><cite>”redact”</cite></dt><dd><p>no depths are provided during periods determined
to be passive data collection.</p>
</dd>
<dt><cite>”undefined”</cite></dt><dd><p>depths are replaced with the placeholder value
used by Echoview to denote undefined values,
which is <cite>-10000.99</cite>.</p>
</dd>
</dl>
<p>Default: “interpolate-time”.</p>
</p></li>
<li><p><strong>collate_passive_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum interval, in ping indices, between detected passive regions
which will removed to merge consecutive passive regions together
into a single, collated, region. Default is 10.</p></li>
<li><p><strong>collate_passive_length</strong> – Maximum interval, in ping indices, between detected blocks
(vertical rectangles) marked for removal which will also be removed
to merge consecutive removed blocks together into a single,
collated, region. Default is 10.</p></li>
<li><p><strong>minimum_passive_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum length, in ping indices, which a detected passive region
must have to be included in the output. Set to -1 to omit all
detected passive regions from the output. Default is 10.</p></li>
<li><p><strong>minimum_removed_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum length, in ping indices, which a detected removal block
(vertical rectangle) must have to be included in the output.
Set to -1 to omit all detected removal blocks from the output
(default). Recommended minimum length is 10.</p></li>
<li><p><strong>minimum_patch_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum area, in pixels, which a detected removal patch
(contour/polygon) region must have to be included in the output.
Set to -1 to omit all detected patches from the output (default).
Recommended minimum length 25.</p></li>
<li><p><strong>patch_mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – <p>Type of mask patches to use. Must be supported by the
model checkpoint used. Should be one of:</p>
<dl class="simple">
<dt><cite>”merged”</cite></dt><dd><p>Target patches for training were determined
after merging as much as possible into the
turbulence and bottom lines.</p>
</dd>
<dt><cite>”original”</cite></dt><dd><p>Target patches for training were determined
using original lines, before expanding the
turbulence and bottom lines.</p>
</dd>
<dt><cite>”ntob”</cite></dt><dd><p>Target patches for training were determined
using the original bottom line and the merged
turbulence line.</p>
</dd>
</dl>
<p>If <cite>None</cite> (default), <cite>“merged”</cite> is used if downfacing and <cite>“ntob”</cite> is
used if upfacing.</p>
</p></li>
<li><p><strong>variable_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the Echoview acoustic variable to load from EV files. Default
is <cite>“Fileset1: Sv pings T1”</cite>.</p></li>
<li><p><strong>row_len_selector</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Method used to handle input csv files with different number of Sv
values across time (i.e. a non-rectangular input). Default is <cite>“mode”</cite>.
See <a class="reference internal" href="echofilter.raw.html#echofilter.raw.loader.transect_loader" title="echofilter.raw.loader.transect_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">echofilter.raw.loader.transect_loader()</span></code></a> for options.</p></li>
<li><p><strong>facing</strong> (<em>{&quot;downward&quot;</em><em>, </em><em>&quot;upward&quot;</em><em>, </em><em>&quot;auto&quot;}</em><em>, </em><em>optional</em>) – Orientation in which the echosounder is facing. Default is <cite>“auto”</cite>,
in which case the orientation is determined from the ordering of the
depth values in the data (increasing = <cite>“upward”</cite>,
decreasing = <cite>“downward”</cite>).</p></li>
<li><p><strong>use_training_standardization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to use the exact normalization center and deviation values as
used during training. If <cite>False</cite> (default), the center and deviation
are determined per sample, using the same method methodology as used
to determine the center and deviation values for training.</p></li>
<li><p><strong>crop_min_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Minimum depth to include in input. If <cite>None</cite> (default), there is no
minimum depth.</p></li>
<li><p><strong>crop_max_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Maxmimum depth to include in input. If <cite>None</cite> (default), there is no
maximum depth.</p></li>
<li><p><strong>autocrop_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Minimum fraction of input height which must be found to be removable
for the model to be re-run with an automatically cropped input.
Default is 0.35.</p></li>
<li><p><strong>image_height</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Height in pixels of input to model. The data loaded from the csv will
be resized to this height (the width of the image is unchanged).
If <cite>None</cite> (default), the height matches that used when the model was
trained.</p></li>
<li><p><strong>checkpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – A path to a checkpoint file, or name of a checkpoint known to this
package (listed in <cite>echofilter/checkpoints.yaml</cite>). If <cite>None</cite> (default),
the first checkpoint in <cite>checkpoints.yaml</cite> is used.</p></li>
<li><p><strong>force_unconditioned</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to always use unconditioned logit outputs. If <cite>False</cite>
(default) conditional logits will be used if the checkpoint loaded is
for a conditional model.</p></li>
<li><p><strong>logit_smoothing_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – Standard deviation over which logits will be smoothed before being
converted into output. Default is <cite>1</cite>.</p></li>
<li><p><strong>device</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.device" title="(in PyTorch v1.13)"><em>torch.device</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Name of device on which the model will be run. If <cite>None</cite>, the first
available CUDA GPU is used if any are found, and otherwise the CPU is
used. Set to <cite>“cpu”</cite> to use the CPU even if a CUDA GPU is available.</p></li>
<li><p><strong>hide_echoview</strong> (<em>{&quot;never&quot;</em><em>, </em><em>&quot;new&quot;</em><em>, </em><em>&quot;always&quot;}</em><em>, </em><em>optional</em>) – Whether to hide the Echoview window entirely while the code runs.
If <code class="docutils literal notranslate"><span class="pre">hide_echoview=&quot;new&quot;</span></code>, the application is only hidden if it
was created by this function, and not if it was already running.
If <code class="docutils literal notranslate"><span class="pre">hide_echoview=&quot;always&quot;</span></code>, the application is hidden even if it was
already running. In the latter case, the window will be revealed again
when this function is completed. Default is <cite>“new”</cite>.</p></li>
<li><p><strong>minimize_echoview</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, the Echoview window being used will be minimized while this
function is running. Default is <cite>False</cite>.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Verbosity level. Default is <cite>2</cite>. Set to <cite>0</cite> to disable print
statements, or elevate to a higher number to increase verbosity.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.path">
<span id="echofilter-path-module"></span><h2>echofilter.path module<a class="headerlink" href="#module-echofilter.path" title="Permalink to this headline">#</a></h2>
<p>Path utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.path.check_if_windows">
<span class="sig-prename descclassname"><span class="pre">echofilter.path.</span></span><span class="sig-name descname"><span class="pre">check_if_windows</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/path.html#check_if_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.path.check_if_windows" title="Permalink to this definition">#</a></dt>
<dd><p>Check if the operating system is Windows.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the OS is Windows.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.path.determine_destination">
<span class="sig-prename descclassname"><span class="pre">echofilter.path.</span></span><span class="sig-name descname"><span class="pre">determine_destination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname_full</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/path.html#determine_destination"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.path.determine_destination" title="Permalink to this definition">#</a></dt>
<dd><p>Determine where destination should be placed for a file, preserving subtree
paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Original input path.</p></li>
<li><p><strong>fname_full</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to file, either absolute or relative; possibly containing
<cite>source_dir</cite>.</p></li>
<li><p><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to a directory where the file bearing name <cite>fname</cite> is expected to
be located.</p></li>
<li><p><strong>output_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to root output directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to where file can be found, either absolute or relative.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.path.determine_file_path">
<span class="sig-prename descclassname"><span class="pre">echofilter.path.</span></span><span class="sig-name descname"><span class="pre">determine_file_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/path.html#determine_file_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.path.determine_file_path" title="Permalink to this definition">#</a></dt>
<dd><p>Determine the path to use to an input file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to an input file. Either an absolute path, or a path relative to
to <cite>source_dir</cite>, or a path relative to the working directory.</p></li>
<li><p><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to a directory where the file bearing name <cite>fname</cite> is expected to
be located.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to where file can be found, either absolute or relative.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.path.parse_files_in_folders">
<span class="sig-prename descclassname"><span class="pre">echofilter.path.</span></span><span class="sig-name descname"><span class="pre">parse_files_in_folders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files_or_folders</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extension</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/path.html#parse_files_in_folders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.path.parse_files_in_folders" title="Permalink to this definition">#</a></dt>
<dd><p>Walk through folders and find suitable files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files_or_folders</strong> (<em>iterable</em>) – List of files and folders.</p></li>
<li><p><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Root directory within which elements of <cite>files_or_folders</cite> may
be found.</p></li>
<li><p><strong>extension</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>Collection</em>) – Extension (or list of extensions) which files within directories must
bear to be included, without leading <cite>‘.’</cite>, for instance <cite>‘.csv’</cite>.
Note that explicitly given files are always used.</p></li>
<li><p><strong>recursive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to walk through the tree of files in a subfolders of a
directory input. If <cite>False</cite>, only files in the folder itself and
not its child folders will be included.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>str</em> – Paths to explicitly given files and files within directories with
extension <cite>extension</cite>.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.plotting">
<span id="echofilter-plotting-module"></span><h2>echofilter.plotting module<a class="headerlink" href="#module-echofilter.plotting" title="Permalink to this headline">#</a></h2>
<p>Plotting utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.plotting.ensure_axes_inverted">
<span class="sig-prename descclassname"><span class="pre">echofilter.plotting.</span></span><span class="sig-name descname"><span class="pre">ensure_axes_inverted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'y'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/plotting.html#ensure_axes_inverted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.plotting.ensure_axes_inverted" title="Permalink to this definition">#</a></dt>
<dd><p>Invert axis direction, if not already inverted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axes</strong> (<em>matplotlib.axes</em><em> or </em><em>None</em>) – The axes to invert. If <cite>None</cite>, the current axes are used (default).</p></li>
<li><p><strong>dir</strong> (<em>{&quot;x&quot;</em><em>, </em><em>&quot;y&quot;</em><em>, </em><em>&quot;xy&quot;}</em>) – The axis to invert. Default is <cite>“y”</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.plotting.plot_indicator_hatch">
<span class="sig-prename descclassname"><span class="pre">echofilter.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_indicator_hatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indicator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ymin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ymax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'//'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'k'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/plotting.html#plot_indicator_hatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.plotting.plot_indicator_hatch" title="Permalink to this definition">#</a></dt>
<dd><p>Plots a hatch across indicated segments along the x-axis of a plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator</strong> (<em>numpy.ndarray vector</em>) – Whether to include or exclude each column along the x-axis. Included
columns are indicated with non-zero values.</p></li>
<li><p><strong>xx</strong> (<em>numpy.ndarray vector</em><em>, </em><em>optional</em>) – Values taken by indicator along the x-axis. If <cite>None</cite> (default), the
indices of <cite>indicator</cite> are used: <cite>arange(len(indicator))</cite>.</p></li>
<li><p><strong>ymin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The lower y-value of the extent of the hatching. If <cite>None</cite> (default),
the minimum y-value of the current axes is used.</p></li>
<li><p><strong>ymax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><em>optional</em>) – The upper y-value of the extent of the hatching. If <cite>None</cite> (default),
the maximum y-value of the current axes is used.</p></li>
<li><p><strong>hatch</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Hatching pattern to use. Default is <cite>“//”</cite>.</p></li>
<li><p><strong>color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of the hatching pattern. Default is black.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.plotting.plot_mask_hatch">
<span class="sig-prename descclassname"><span class="pre">echofilter.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_mask_hatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'//'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/plotting.html#plot_mask_hatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.plotting.plot_mask_hatch" title="Permalink to this definition">#</a></dt>
<dd><p>Plot hatching according to a mask shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like</em><em>, </em><em>optional</em>) – <p>The coordinates of the values in Z.</p>
<p>X and Y must both be 2-D with the same shape as <cite>Z</cite> (e.g. created via
numpy.meshgrid), or they must both be 1-D such that <code class="docutils literal notranslate"><span class="pre">len(X)</span> <span class="pre">==</span> <span class="pre">M</span></code> is
the number of columns in <cite>Z</cite> and <code class="docutils literal notranslate"><span class="pre">len(Y)</span> <span class="pre">==</span> <span class="pre">N</span></code> is the number of rows
in <cite>Z</cite>.</p>
<p>If not given, they are assumed to be integer indices, i.e.
<code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">=</span> <span class="pre">range(M)</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">range(N)</span></code>.</p>
</p></li>
<li><p><strong>Y</strong> (<em>array-like</em><em>, </em><em>optional</em>) – <p>The coordinates of the values in Z.</p>
<p>X and Y must both be 2-D with the same shape as <cite>Z</cite> (e.g. created via
numpy.meshgrid), or they must both be 1-D such that <code class="docutils literal notranslate"><span class="pre">len(X)</span> <span class="pre">==</span> <span class="pre">M</span></code> is
the number of columns in <cite>Z</cite> and <code class="docutils literal notranslate"><span class="pre">len(Y)</span> <span class="pre">==</span> <span class="pre">N</span></code> is the number of rows
in <cite>Z</cite>.</p>
<p>If not given, they are assumed to be integer indices, i.e.
<code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">=</span> <span class="pre">range(M)</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">range(N)</span></code>.</p>
</p></li>
<li><p><strong>Z</strong> (<em>array-like</em><em>(</em><em>N</em><em>, </em><em>M</em><em>)</em>) – Indicator for which locations should be hatched. If <cite>Z</cite> is not a boolean
array, any location where <code class="docutils literal notranslate"><span class="pre">Z</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> will be hatched.</p></li>
<li><p><strong>hatch</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The hatching pattern to apply. Default is “//”.</p></li>
<li><p><strong>color</strong> (<em>color</em><em>, </em><em>optional</em>) – The color of the hatch. Default is black.</p></li>
<li><p><strong>border</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to include border around hatch. Default is <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.plotting.plot_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'index'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turbulence_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#a6cee3'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bottom_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#b2df8a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#4ba82a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.4,</span> <span class="pre">0.4,</span> <span class="pre">0.4]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removed_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/plotting.html#plot_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.plotting.plot_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Plot a transect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Transect values.</p></li>
<li><p><strong>signal_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The signal to plot as a heatmap. Default is <cite>“Sv”</cite> if present, or
“signals” if not. If this is <cite>“Sv_masked”</cite>, the mask (given by
<cite>transect[“mask”]</cite>) is used to mask <cite>transect[“Sv”]</cite> before plotting.</p></li>
<li><p><strong>x_scale</strong> (<em>{&quot;index&quot;</em><em>, </em><em>&quot;timestamp&quot; &quot;time&quot;}</em><em>, </em><em>optional</em>) – Scaling for x-axis. If <cite>“timestamp”</cite>, the number of seconds since the
Unix epoch is shown; if <cite>“time”</cite>, the amount of time in seconds since
the start of the transect is shown. Default is <cite>“index”</cite>.</p></li>
<li><p><strong>show_regions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to show segments of data maked as removed or passive with
hatching. Passive data is shown with <cite>“/”</cite> oriented lines, other removed
timestamps with <cite>“&quot;</cite> oriented lines. Default is <cite>True</cite>.</p></li>
<li><p><strong>turbulence_color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of turbulence line. Default is <cite>“#a6cee3”</cite>.</p></li>
<li><p><strong>bottom_color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of bottom line. Default is <cite>“#b2df8a”</cite>.</p></li>
<li><p><strong>surface_color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of surface line. Default is <cite>“#d68ade”</cite>.</p></li>
<li><p><strong>passive_color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of passive segment hatching. Default is <cite>[.4, .4, .4]</cite>.</p></li>
<li><p><strong>removed_color</strong> (<em>color</em><em>, </em><em>optional</em>) – Color of removed segment hatching. Default is <cite>“r”</cite> if <cite>cmap</cite> is
<cite>“viridis”</cite>, and <cite>“b”</cite> otherwise.</p></li>
<li><p><strong>linewidth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Width of lines. Default is <cite>2</cite>.</p></li>
<li><p><strong>cmap</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of a registered matplotlib colormap. If <cite>None</cite> (default), the
current default colormap is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.plotting.plot_transect_predictions">
<span class="sig-prename descclassname"><span class="pre">echofilter.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_transect_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/plotting.html#plot_transect_predictions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.plotting.plot_transect_predictions" title="Permalink to this definition">#</a></dt>
<dd><p>Plot the generated output for a transect against its ground truth data.</p>
<blockquote>
<div><ul class="simple">
<li><p>Ground truth data is shown in black, predictions in white.</p></li>
<li><p>Passive regions are hatched in / direction for ground truth, for
prediciton.</p></li>
<li><p>Removed regions are hatched in direction for ground truth, / for
prediction.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transect</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Ground truth data for the transect.</p></li>
<li><p><strong>prediction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Predictions for the transect.</p></li>
<li><p><strong>linewidth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Width of lines. Default is <cite>2</cite>.</p></li>
<li><p><strong>cmap</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of a registered matplotlib colormap. If <cite>None</cite> (default), the
current default colormap is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.train">
<span id="echofilter-train-module"></span><h2>echofilter.train module<a class="headerlink" href="#module-echofilter.train" title="Permalink to this headline">#</a></h2>
<p>Model training routine.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.build_dataset">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">build_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_crop_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#build_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.build_dataset" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a pytorch Dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the dataset. This can optionally be a list of
multiple datasets joined with <cite>“+”</cite>.</p></li>
<li><p><strong>data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to root data directory, containing the dataset.</p></li>
<li><p><strong>sample_shape</strong> (<em>iterable of length 2</em>) – The shape which will be used for training.</p></li>
<li><p><strong>train_partition</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the partition to use for training. Can optionally be a list of
multiple partitions joined with <cite>“+”</cite>. Default is <cite>“train”</cite>
(except for <cite>stationary2</cite> where it is mixed).</p></li>
<li><p><strong>val_partition</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the partition to use for validation. Can optionally be a list
of multiple partitions joined with <cite>“+”</cite>. Default is <cite>“validate”</cite>
(except for <cite>stationary2</cite> where it is mixed).</p></li>
<li><p><strong>crop_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Depth at which to crop samples. Default is <cite>None</cite>.</p></li>
<li><p><strong>random_crop_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>optional</em>) – Arguments to control the random crop used during training. Default is
an empty dict, which uses the default arguments of
<cite>echofilter.data.transforms.RandomCropDepth</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>dataset_train</strong> (<em>echofilter.data.dataset.TransectDataset</em>) – Dataset of training samples.</p></li>
<li><p><strong>dataset_val</strong> (<em>echofilter.data.dataset.TransectDataset</em>) – Dataset of validation samples.</p></li>
<li><p><strong>dataset_augval</strong> (<em>echofilter.data.dataset.TransectDataset</em>) – Dataset of validation samples, appyling the training augmentation
stack.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.generate_from_file">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">generate_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#generate_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.generate_from_file" title="Permalink to this definition">#</a></dt>
<dd><p>Generate an output for a sample transect, specified by its file path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.generate_from_shards">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">generate_from_shards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#generate_from_shards"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.generate_from_shards" title="Permalink to this definition">#</a></dt>
<dd><p>Generate an output for a sample transect, specified by the path to its
sharded data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.generate_from_transect">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">generate_from_transect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#generate_from_transect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.generate_from_transect" title="Permalink to this definition">#</a></dt>
<dd><p>Generate an output for a sample transect, .</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.meters_to_csv">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">meters_to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">meters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_best</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meters.csv'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#meters_to_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.meters_to_csv" title="Permalink to this definition">#</a></dt>
<dd><p>Export performance metrics to CSV format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meters</strong> (<em>dict of dict</em>) – Collection of output meters, as a nested dictionary.</p></li>
<li><p><strong>is_best</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether this model state is the best so far. If <cite>True</cite>, the CSV file
will be copied to <cite>“model_best.meters.csv”</cite>.</p></li>
<li><p><strong>dirname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Path to directory in which the checkpoint will be saved.
Default is <cite>“.”</cite> (current directory of the executed script).</p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Format for the output file. Default is <cite>“meters.csv”</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.save_checkpoint">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">save_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_best</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname_fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'checkpoint{}.pt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#save_checkpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.save_checkpoint" title="Permalink to this definition">#</a></dt>
<dd><p>Save a model checkpoint, using <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.save()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Model checkpoint state to record.</p></li>
<li><p><strong>is_best</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether this model state is the best so far. If <cite>True</cite>, the best
checkpoint (by default named <cite>“checkpoint_best.pt”</cite>) will be overwritten
with this <cite>state</cite>.</p></li>
<li><p><strong>dirname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Path to directory in which the checkpoint will be saved.
Default is <cite>“.”</cite> (current directory of the executed script).</p></li>
<li><p><strong>fname_fmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Format for the file name(s) of the saved checkpoint(s). Must include
one string argument output. Default is <cite>“checkpoint{}.pt”</cite>.</p></li>
<li><p><strong>dup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><em>None</em>) – If this is not <cite>None</cite>, a duplicate copy of the checkpoint is recorded
in accordance with <cite>fname_fmt</cite>. By default the duplicate output file
name will be styled as <cite>“checkpoint_&lt;dup&gt;.pt”</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.train">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/data/dsforce/surveyExports'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mobile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(128,</span> <span class="pre">512)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_name_append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latent_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expansion_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_only_on_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks_per_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks_before_first_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_include_skip_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deepest_inner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal_block'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intrablock_expansion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">se_reduction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsampling_modes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upsampling_modes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bilinear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depthwise_separable_conv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">residual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actfn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'InplaceReLU'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_mixed_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amp_opt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'O1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cuda'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multigpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_worker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stratify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epoch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rangerva'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schedule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'constant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">momentum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_momentum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warmup_pct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warmdown_pct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anneal_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cos'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_loss_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#train"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.train" title="Permalink to this definition">#</a></dt>
<dd><p>Train a model.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.train_epoch">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">train_epoch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schedule_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_mixed_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continue_through_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#train_epoch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.train_epoch" title="Permalink to this definition">#</a></dt>
<dd><p>Train a model through a single epoch of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loader</strong> (<em>iterable</em><em>, </em><a class="reference external" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader" title="(in PyTorch v1.13)"><em>torch.utils.data.DataLoader</em></a>) – Dataloader.</p></li>
<li><p><strong>model</strong> (<em>callable</em><em>, </em><a class="reference internal" href="echofilter.nn.html#echofilter.nn.wrapper.Echofilter" title="echofilter.nn.wrapper.Echofilter"><em>echofilter.nn.wrapper.Echofilter</em></a>) – Model.</p></li>
<li><p><strong>criterion</strong> (<em>callable</em><em>, </em><em>torch.nn.modules.loss._Loss</em>) – Loss function.</p></li>
<li><p><strong>device</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.device" title="(in PyTorch v1.13)"><em>torch.device</em></a>) – Which device the data should be loaded onto.</p></li>
<li><p><strong>epoch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Which epoch is being performed.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype" title="(in PyTorch v1.13)"><em>torch.dtype</em></a>) – Datatype which which the data should be loaded.</p></li>
<li><p><strong>print_freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of batches between reporting progress. Default is <cite>10</cite>.</p></li>
<li><p><strong>schedule_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em> or </em><em>None</em>) – If a learning rate schedule is being used, this may be passed as a
dictionary with the key <cite>“scheduler”</cite> mapping to the learning rate
schedule as a callable.</p></li>
<li><p><strong>use_mixed_precision</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to use <code class="xref py py-meth docutils literal notranslate"><span class="pre">apex.amp.scale_loss()</span></code> to automatically scale the
loss. Default is <cite>False</cite>.</p></li>
<li><p><strong>continue_through_error</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to catch errors within an individual batch, ignore them and
continue running training on the rest of the batches. If there are
five or more errors while processing the batch, training will halt
regardless of <cite>continue_through_error</cite>. Default is <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>average_loss</strong> (<em>float</em>) – Average loss as given by criterion (weighted equally for each sample
in <cite>loader</cite>).</p></li>
<li><p><strong>meters</strong> (<em>dict of dict</em>) – Each key is a strata of the model output, each mapping to a their own
dictionary of evaluation criterions: “Accuracy”, “Precision”, “Recall”,
“F1 Score”, “Jaccard”.</p></li>
<li><p><strong>examples</strong> (<em>tuple of torch.Tensor</em>) – Tuple of <cite>(example_input, example_data, example_output)</cite>.</p></li>
<li><p><strong>timing</strong> (<em>tuple of floats</em>) – Tuple of <cite>(batch_time, data_time)</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.train.validate">
<span class="sig-prename descclassname"><span class="pre">echofilter.train.</span></span><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Test'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_examples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/train.html#validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.train.validate" title="Permalink to this definition">#</a></dt>
<dd><p>Validate the model’s performance on the validation partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loader</strong> (<em>iterable</em><em>, </em><a class="reference external" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader" title="(in PyTorch v1.13)"><em>torch.utils.data.DataLoader</em></a>) – Dataloader.</p></li>
<li><p><strong>model</strong> (<em>callable</em><em>, </em><a class="reference internal" href="echofilter.nn.html#echofilter.nn.wrapper.Echofilter" title="echofilter.nn.wrapper.Echofilter"><em>echofilter.nn.wrapper.Echofilter</em></a>) – Model.</p></li>
<li><p><strong>criterion</strong> (<em>callable</em><em>, </em><em>torch.nn.modules.loss._Loss</em>) – Loss function.</p></li>
<li><p><strong>device</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.device" title="(in PyTorch v1.13)"><em>torch.device</em></a>) – Which device the data should be loaded onto.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype" title="(in PyTorch v1.13)"><em>torch.dtype</em></a>) – Datatype which which the data should be loaded.</p></li>
<li><p><strong>print_freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of batches between reporting progress. Default is <cite>10</cite>.</p></li>
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Prefix string to prepend to progress meter names. Default is <cite>“Test”</cite>.</p></li>
<li><p><strong>num_examples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of example inputs to return. Default is <cite>32</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>average_loss</strong> (<em>float</em>) – Average loss as given by criterion (weighted equally for each sample
in <cite>loader</cite>).</p></li>
<li><p><strong>meters</strong> (<em>dict of dict</em>) – Each key is a strata of the model output, each mapping to a their own
dictionary of evaluation criterions: “Accuracy”, “Precision”, “Recall”,
“F1 Score”, “Jaccard”.</p></li>
<li><p><strong>examples</strong> (<em>tuple of torch.Tensor</em>) – Tuple of <cite>(example_input, example_data, example_output)</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-echofilter.utils">
<span id="echofilter-utils-module"></span><h2>echofilter.utils module<a class="headerlink" href="#module-echofilter.utils" title="Permalink to this headline">#</a></h2>
<p>General utility functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="echofilter.utils.first_nonzero">
<span class="sig-prename descclassname"><span class="pre">echofilter.utils.</span></span><span class="sig-name descname"><span class="pre">first_nonzero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invalid_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/utils.html#first_nonzero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.utils.first_nonzero" title="Permalink to this definition">#</a></dt>
<dd><p>Find the index of the first non-zero element in an array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><em>numpy.ndarray</em></a>) – Array to search.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Axis along which to search for a non-zero element. Default is <cite>-1</cite>.</p></li>
<li><p><strong>invalid_val</strong> (<em>any</em><em>, </em><em>optional</em>) – Value to return if all elements are zero. Default is <cite>-1</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.utils.get_indicator_onoffsets">
<span class="sig-prename descclassname"><span class="pre">echofilter.utils.</span></span><span class="sig-name descname"><span class="pre">get_indicator_onoffsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indicator</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/utils.html#get_indicator_onoffsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.utils.get_indicator_onoffsets" title="Permalink to this definition">#</a></dt>
<dd><p>Find the onsets and offsets of nonzero entries in an indicator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indicator</strong> (<em>1d numpy.ndarray</em>) – Input vector, which is sometimes zero and sometimes nonzero.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>onsets</strong> (<em>list</em>) – Onset indices, where each entry is the start of a sequence of nonzero
values in the input <cite>indicator</cite>.</p></li>
<li><p><strong>offsets</strong> (<em>list</em>) – Offset indices, where each entry is the last in a sequence of nonzero
values in the input <cite>indicator</cite>, such that
<code class="docutils literal notranslate"><span class="pre">indicator[onsets[i]</span> <span class="pre">:</span> <span class="pre">offsets[i]</span> <span class="pre">+</span> <span class="pre">1]</span> <span class="pre">!=</span> <span class="pre">0</span></code>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.utils.last_nonzero">
<span class="sig-prename descclassname"><span class="pre">echofilter.utils.</span></span><span class="sig-name descname"><span class="pre">last_nonzero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invalid_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/utils.html#last_nonzero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.utils.last_nonzero" title="Permalink to this definition">#</a></dt>
<dd><p>Find the index of the last non-zero element in an array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><em>numpy.ndarray</em></a>) – Array to search.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Axis along which to search for a non-zero element. Default is <cite>-1</cite>.</p></li>
<li><p><strong>invalid_val</strong> (<em>any</em><em>, </em><em>optional</em>) – Value to return if all elements are zero. Default is <cite>-1</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="echofilter.utils.mode">
<span class="sig-prename descclassname"><span class="pre">echofilter.utils.</span></span><span class="sig-name descname"><span class="pre">mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/echofilter/utils.html#mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#echofilter.utils.mode" title="Permalink to this definition">#</a></dt>
<dd><p>Return an array of the modal (most common) value in the passed array.</p>
<p>If there is more than one such value, only the smallest is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>array_like</em>) – n-dimensional array of which to find mode(s).</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – Axis or axes along which the mode is computed. The default,
<cite>axis=None</cite>, will sum all of the elements of the input array.
If axis is negative it counts from the last to the first axis.</p></li>
<li><p><strong>keepdims</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – If this is set to <cite>True</cite>, the axes which are reduced are left
in the result as dimensions with size one. With this option, the result
will broadcast correctly against the input array. Default is <cite>False</cite>.</p></li>
<li><p><strong>**kwargs</strong> – Additional arguments as per <code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.stats.mode()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mode_along_axis</strong> – An array with the same shape as <cite>a</cite>, with the specified axis removed.
If <cite>keepdims=True</cite> and either <cite>a</cite> is a 0-d array or <cite>axis</cite> is None,
a scalar is returned.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)">numpy.ndarray</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mode.html#scipy.stats.mode" title="(in SciPy v1.9.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.stats.mode</span></code></a></p>
</div>
</dd></dl>

</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="modules.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">API Reference</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="echofilter.data.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">echofilter.data package</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Scott C. Lowe<br/>
  
      &copy; Copyright 2022, Scott C. Lowe.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>